<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title></title>
        <link>localhost/blog</link>
        <description></description>
        <lastBuildDate>Sat, 16 Dec 2023 13:44:11 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[JavaScript å‡½æ•°å¼ç¼–ç¨‹]]></title>
            <link>localhost/blog/blog/posts/JavaScript-fp.html</link>
            <guid>localhost/blog/blog/posts/JavaScript-fp.html</guid>
            <pubDate>Sun, 11 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[<p>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³æ˜¯ä¸€ç§å¯¹è¿ç®—è¿‡ç¨‹çš„æŠ½è±¡ï¼Œè¿™é‡Œçš„å‡½æ•°æ˜¯æŒ‡æ•°å­¦æ„ä¹‰ä¸Šæ˜ å°„å…³ç³»ï¼ˆå¦‚<em>y=sin(x)</em>ï¼‰ï¼Œä¹Ÿç§°ä¸ºçº¯å‡½æ•°ï¼Œè€Œç¼–ç¨‹è¯­è¨€å®šä¹‰çš„å‡½æ•°é™¤äº†è¿ç®—ï¼Œå¾€å¾€å¸¦æœ‰å‰¯ä½œç”¨ï¼Œå¦‚ IO æ“ä½œã€å½±å“å¤–éƒ¨å˜é‡ç­‰ã€‚</p>
<nav class="table-of-contents"><ul><li><a href="#_1-å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€">1. å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€</a><ul><li><a href="#_1-1-å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘">1.1 å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘</a></li><li><a href="#_1-2-é«˜é˜¶å‡½æ•°">1.2 é«˜é˜¶å‡½æ•°</a></li></ul></li></ul></nav>
<h2 id="_1-å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€" tabindex="-1">1. å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€ <a class="header-anchor" href="#_1-å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€" aria-label="Permalink to &quot;1. å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-1-å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘" tabindex="-1">1.1 å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ <a class="header-anchor" href="#_1-1-å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘" aria-label="Permalink to &quot;1.1 å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘&quot;">&ZeroWidthSpace;</a></h3>
<p>å‡½æ•°åªæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨å˜é‡è¡¨ç¤ºï¼ˆå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼‰</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">add</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">x</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">y</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">x</span><span style="color: #F07178"> </span><span style="color: #89DDFF">+</span><span style="color: #F07178"> </span><span style="color: #BABED8">y</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> sum </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> add</span></span>
<span class="line"><span style="color: #82AAFF">sum</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">) </span><span style="color: #676E95; font-style: italic">// 3</span></span></code></pre>
</div><h3 id="_1-2-é«˜é˜¶å‡½æ•°" tabindex="-1">1.2 é«˜é˜¶å‡½æ•° <a class="header-anchor" href="#_1-2-é«˜é˜¶å‡½æ•°" aria-label="Permalink to &quot;1.2 é«˜é˜¶å‡½æ•°&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°</li>
<li>å‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼</li>
</ul>
<p>å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ¨¡æ‹Ÿå®ç° forEach å‡½æ•°ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">myForEach</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">array</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">f</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">for</span><span style="color: #F07178"> (</span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">;</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&lt;</span><span style="color: #F07178"> </span><span style="color: #BABED8">array</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">length</span><span style="color: #89DDFF">;</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #89DDFF">++</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">f</span><span style="color: #F07178">(</span><span style="color: #BABED8">array</span><span style="color: #F07178">[</span><span style="color: #BABED8">i</span><span style="color: #F07178">])</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">myForEach</span><span style="color: #BABED8">([</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #BABED8">]</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">itemÃ</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">item</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œå°è£…ä¸€ä¸ª once å‡½æ•°ï¼Œç”Ÿæˆä¸€ä¸ªåªèƒ½æ‰§è¡Œä¸€æ¬¡çš„å‡½æ•°ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">once</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">fn</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">done</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #FF9CAC">false</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">(...</span><span style="color: #BABED8; font-style: italic">args</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #89DDFF">!</span><span style="color: #BABED8">done</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">done</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #FF9CAC">true</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">fn</span><span style="color: #F07178">(</span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> pay </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">once</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">money</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">`</span><span style="color: #C3E88D">æ¶ˆè´¹äº†</span><span style="color: #89DDFF">${</span><span style="color: #BABED8">money</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">å…ƒ</span><span style="color: #89DDFF">`</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">pay</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">5</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #82AAFF">pay</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">5</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #82AAFF">pay</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">5</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">//</span></span></code></pre>
</div>]]></description>
            <content:encoded><![CDATA[<p>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³æ˜¯ä¸€ç§å¯¹è¿ç®—è¿‡ç¨‹çš„æŠ½è±¡ï¼Œè¿™é‡Œçš„å‡½æ•°æ˜¯æŒ‡æ•°å­¦æ„ä¹‰ä¸Šæ˜ å°„å…³ç³»ï¼ˆå¦‚<em>y=sin(x)</em>ï¼‰ï¼Œä¹Ÿç§°ä¸ºçº¯å‡½æ•°ï¼Œè€Œç¼–ç¨‹è¯­è¨€å®šä¹‰çš„å‡½æ•°é™¤äº†è¿ç®—ï¼Œå¾€å¾€å¸¦æœ‰å‰¯ä½œç”¨ï¼Œå¦‚ IO æ“ä½œã€å½±å“å¤–éƒ¨å˜é‡ç­‰ã€‚</p>
<nav class="table-of-contents"><ul><li><a href="#_1-å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€">1. å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€</a><ul><li><a href="#_1-1-å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘">1.1 å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘</a></li><li><a href="#_1-2-é«˜é˜¶å‡½æ•°">1.2 é«˜é˜¶å‡½æ•°</a></li><li><a href="#_1-3-é—­åŒ…">1.3 é—­åŒ…</a></li></ul></li><li><a href="#_2-å‡½æ•°å¼ç¼–ç¨‹æ ¸å¿ƒ">2. å‡½æ•°å¼ç¼–ç¨‹æ ¸å¿ƒ</a><ul><li><a href="#_2-1-çº¯å‡½æ•°">2.1 çº¯å‡½æ•°</a></li><li><a href="#_2-2-å‰¯ä½œç”¨">2.2 å‰¯ä½œç”¨</a></li><li><a href="#_2-3-æŸ¯é‡ŒåŒ–">2.3 æŸ¯é‡ŒåŒ–</a></li><li><a href="#_2-4-å‡½æ•°ç»„åˆ">2.4 å‡½æ•°ç»„åˆ</a></li></ul></li></ul></nav>
<h2 id="_1-å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€" tabindex="-1">1. å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€ <a class="header-anchor" href="#_1-å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€" aria-label="Permalink to &quot;1. å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_1-1-å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘" tabindex="-1">1.1 å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ <a class="header-anchor" href="#_1-1-å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘" aria-label="Permalink to &quot;1.1 å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘&quot;">&ZeroWidthSpace;</a></h3>
<p>å‡½æ•°åªæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨å˜é‡è¡¨ç¤ºï¼ˆå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼‰</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">add</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">x</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">y</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">x</span><span style="color: #F07178"> </span><span style="color: #89DDFF">+</span><span style="color: #F07178"> </span><span style="color: #BABED8">y</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> sum </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> add</span></span>
<span class="line"><span style="color: #82AAFF">sum</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">) </span><span style="color: #676E95; font-style: italic">// 3</span></span></code></pre>
</div><h3 id="_1-2-é«˜é˜¶å‡½æ•°" tabindex="-1">1.2 é«˜é˜¶å‡½æ•° <a class="header-anchor" href="#_1-2-é«˜é˜¶å‡½æ•°" aria-label="Permalink to &quot;1.2 é«˜é˜¶å‡½æ•°&quot;">&ZeroWidthSpace;</a></h3>
<ul>
<li>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°</li>
<li>å‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼</li>
</ul>
<p>å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ¨¡æ‹Ÿå®ç° forEach å‡½æ•°ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">myForEach</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">array</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">f</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">for</span><span style="color: #F07178"> (</span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">;</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&lt;</span><span style="color: #F07178"> </span><span style="color: #BABED8">array</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">length</span><span style="color: #89DDFF">;</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #89DDFF">++</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">f</span><span style="color: #F07178">(</span><span style="color: #BABED8">array</span><span style="color: #F07178">[</span><span style="color: #BABED8">i</span><span style="color: #F07178">])</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">myForEach</span><span style="color: #BABED8">([</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #BABED8">]</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">itemÃ</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">item</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œå°è£…ä¸€ä¸ª once å‡½æ•°ï¼Œç”Ÿæˆä¸€ä¸ªåªèƒ½æ‰§è¡Œä¸€æ¬¡çš„å‡½æ•°ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">once</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">fn</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">done</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #FF9CAC">false</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">(...</span><span style="color: #BABED8; font-style: italic">args</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #89DDFF">!</span><span style="color: #BABED8">done</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">done</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #FF9CAC">true</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">fn</span><span style="color: #F07178">(</span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> pay </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">once</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">money</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">`</span><span style="color: #C3E88D">æ¶ˆè´¹äº†</span><span style="color: #89DDFF">${</span><span style="color: #BABED8">money</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">å…ƒ</span><span style="color: #89DDFF">`</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">pay</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">5</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #82AAFF">pay</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">5</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #82AAFF">pay</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">5</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// ---</span></span>
<span class="line"><span style="color: #BABED8">æ¶ˆè´¹äº†5å…ƒ</span></span></code></pre>
</div><p>æ•°ç»„çš„æ–¹æ³•ä¸­æœ‰å¾ˆå¤šé«˜é˜¶å‡½æ•°ï¼Œå¦‚ mapã€reduceã€filterã€everyã€some ç­‰ï¼Œä»¥ä¸‹ä¸ºæ¨¡æ‹Ÿå®ç°ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> map </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">arr</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">fn</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">temp</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> []</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">for</span><span style="color: #F07178"> (</span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #F07178"> </span><span style="color: #89DDFF">of</span><span style="color: #F07178"> </span><span style="color: #BABED8">arr</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">temp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">push</span><span style="color: #F07178">(</span><span style="color: #82AAFF">fn</span><span style="color: #F07178">(</span><span style="color: #BABED8">i</span><span style="color: #F07178">))</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">temp</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> every </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">arr</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">f</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">result</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #FF9CAC">true</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">for</span><span style="color: #F07178"> (</span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">i</span><span style="color: #F07178"> </span><span style="color: #89DDFF">of</span><span style="color: #F07178"> </span><span style="color: #BABED8">arr</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">result</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #82AAFF">f</span><span style="color: #F07178">(</span><span style="color: #BABED8">i</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #89DDFF">!</span><span style="color: #BABED8">result</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">break</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">result</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span></code></pre>
</div><p>ğŸ’¡ é«˜é˜¶å‡½æ•°çš„æ„ä¹‰ï¼šæŠŠå‡½æ•°è¿›ä¸€æ­¥å°è£…æŠ½è±¡ã€å±è”½ç»†èŠ‚ï¼Œåªå…³æ³¨ç»“æœ</p>
<h3 id="_1-3-é—­åŒ…" tabindex="-1">1.3 é—­åŒ… <a class="header-anchor" href="#_1-3-é—­åŒ…" aria-label="Permalink to &quot;1.3 é—­åŒ…&quot;">&ZeroWidthSpace;</a></h3>
<p>é—­åŒ…ï¼šé€šå¸¸ï¼Œé—­åŒ…æ˜¯æŒ‡ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ Â <code>[[Environment]]</code>Â  æ¥è®°å½•å‡½æ•°è‡ªèº«çš„åˆ›å»ºæ—¶çš„ç¯å¢ƒçš„å‡½æ•°ã€‚å®ƒå…·ä½“æŒ‡å‘äº†å‡½æ•°åˆ›å»ºæ—¶çš„è¯æ³•ç¯å¢ƒã€‚</p>
<div class="info custom-block"><p class="custom-block-title">INFO</p>
<p>é—­åŒ…çš„æœ¬è´¨ï¼šå‡½æ•°åœ¨æ‰§è¡Œæ—¶ä¼šæ”¾åˆ°ä¸€ä¸ªæ‰§è¡Œæ ˆä¸Šï¼Œå‡½æ•°æ‰§è¡Œå®Œä»æ ˆä¸­ç§»é™¤ã€‚ä½†æ˜¯å½“ä½œç”¨åŸŸæˆå‘˜è¢«å¤–éƒ¨å¼•ç”¨åˆ™ä¸èƒ½é‡Šæ”¾ï¼Œå› æ­¤å†…éƒ¨å‡½æ•°ä¾ç„¶å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°æˆå‘˜ã€‚</p>
</div>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// ç¤ºä¾‹ä¸€</span></span>
<span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">makefn</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">msg</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">hello</span><span style="color: #89DDFF">&quot;</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">msg</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> fn </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">makefn</span><span style="color: #BABED8">()</span></span>
<span class="line"><span style="color: #82AAFF">fn</span><span style="color: #BABED8">() </span><span style="color: #676E95; font-style: italic">// hello</span></span></code></pre>
</div><h2 id="_2-å‡½æ•°å¼ç¼–ç¨‹æ ¸å¿ƒ" tabindex="-1">2. å‡½æ•°å¼ç¼–ç¨‹æ ¸å¿ƒ <a class="header-anchor" href="#_2-å‡½æ•°å¼ç¼–ç¨‹æ ¸å¿ƒ" aria-label="Permalink to &quot;2. å‡½æ•°å¼ç¼–ç¨‹æ ¸å¿ƒ&quot;">&ZeroWidthSpace;</a></h2>
<h3 id="_2-1-çº¯å‡½æ•°" tabindex="-1">2.1 çº¯å‡½æ•° <a class="header-anchor" href="#_2-1-çº¯å‡½æ•°" aria-label="Permalink to &quot;2.1 çº¯å‡½æ•°&quot;">&ZeroWidthSpace;</a></h3>
<p>çº¯å‡½æ•°å³æ•°å­¦æ„ä¹‰ä¸Šçš„å‡½æ•°ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸€ç§æ˜ å°„å…³ç³»ï¼Œç›¸åŒè¾“å…¥æ°¸è¿œå¾—åˆ°ç›¸åŒè¾“å‡ºï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚</p>
<p>çº¯å‡½æ•°ç¤ºä¾‹ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> list </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> [</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #BABED8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// sliceæ–¹æ³•æ˜¯çº¯å‡½æ•°ï¼Œä¸ä¼šæ”¹å˜listçš„å€¼ï¼Œå³æ²¡æœ‰å‰¯ä½œç”¨</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> l1 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> list</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">slice</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(list</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> l1) </span><span style="color: #676E95; font-style: italic">// [ 1, 2, 3 ] [ 2 ]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// spliceæ–¹æ³•ä¸æ˜¯çº¯å‡½æ•°ï¼Œä¼šåŸåœ°æ”¹å˜åŸlistçš„å€¼ï¼Œå³äº§ç”Ÿäº†å‰¯ä½œç”¨</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> l2 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> list</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">splice</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">1</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(list</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> l2) </span><span style="color: #676E95; font-style: italic">// [ 1, 3 ] [ 2 ]</span></span></code></pre>
</div><p>ğŸ’¡ lodash æ˜¯ä¸€ä¸ªçº¯å‡½æ•°åº“ï¼Œå°è£…äº†å¯¹å¸¸ç”¨æ•°æ®ç±»å‹çš„æ“ä½œæ–¹æ³•ï¼Œæœ‰çš„å‰¯ä½œç”¨ï¼Œæœ‰çš„æ²¡æœ‰ã€‚</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> _ </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">require</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">lodash</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> l </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> [</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">4</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">5</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">A</span><span style="color: #89DDFF">&quot;</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">b</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">_</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">first</span><span style="color: #BABED8">(l)</span></span>
<span class="line"><span style="color: #BABED8">_</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">last</span><span style="color: #BABED8">(l)</span></span>
<span class="line"><span style="color: #BABED8">_</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">reverse</span><span style="color: #BABED8">(l) </span><span style="color: #676E95; font-style: italic">// æœ‰å‰¯ä½œç”¨</span></span></code></pre>
</div><p><strong>çº¯å‡½æ•°çš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>å¯ç¼“å­˜</li>
<li>å¯æµ‹è¯•</li>
<li>æ–¹ä¾¿å¹¶è¡Œå¤„ç†</li>
</ul>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// ç¼“å­˜çº¯å‡½æ•°çš„å€¼ï¼Œå¯ä»¥é¿å…é‡å¤è®¡ç®—ï¼Œæé«˜æ€§èƒ½</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> _ </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">require</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">lodash</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> add </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">x</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">y</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">==&gt;&gt;</span><span style="color: #89DDFF">&quot;</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8">x</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8">y</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">x</span><span style="color: #F07178"> </span><span style="color: #89DDFF">+</span><span style="color: #F07178"> </span><span style="color: #BABED8">y</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> addWithMemory </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">memoize</span><span style="color: #BABED8">(add)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">add</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">add</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">addWithMemory</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">addWithMemory</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">))</span></span></code></pre>
</div><h3 id="_2-2-å‰¯ä½œç”¨" tabindex="-1">2.2 å‰¯ä½œç”¨ <a class="header-anchor" href="#_2-2-å‰¯ä½œç”¨" aria-label="Permalink to &quot;2.2 å‰¯ä½œç”¨&quot;">&ZeroWidthSpace;</a></h3>
<p>çº¯å‡½æ•°æ ¹æ®ç›¸åŒçš„è¾“å…¥ä¼šæ°¸è¿œçš„åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œå¦‚æœå‡½æ•°ä¾èµ–äºå¤–éƒ¨çŠ¶æ€å°±æ— æ³•ä¿è¯ç›¸åŒè¾“å‡ºï¼Œå³å¸¦æ¥å‰¯ä½œç”¨ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> threshold </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">18</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// ä¸æ˜¯çº¯å‡½æ•°ï¼Œä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼Œå¦‚æœå¤–éƒ¨å˜é‡æ”¹å˜ï¼Œç›¸åŒè¾“å…¥å¯èƒ½ä¼šå¾—åˆ°ä¸åŒè¾“å‡º</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> ifAdult </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">age</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> age </span><span style="color: #89DDFF">&gt;</span><span style="color: #BABED8"> threshold</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// çº¯å‡½æ•°ï¼Œä¸ä¾èµ–å¤–éƒ¨ï¼Œç›¸åŒè¾“å…¥å§‹ç»ˆåˆ°ç›¸åŒè¾“å‡º</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> ifAdult2 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">age</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">threshold</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #F78C6C">18</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">age</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&gt;</span><span style="color: #F07178"> </span><span style="color: #BABED8">threshold</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span></code></pre>
</div><aside>
ğŸ’¡ æ‰€æœ‰ä¸å‡½æ•°å¤–çš„äº¤äº’éƒ½å¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨ï¼Œä½†å‰¯ä½œç”¨ä¸å¯èƒ½å®Œå…¨ç¦æ­¢ï¼Œåªèƒ½å°½å¯èƒ½çš„å°†å…¶é™åˆ¶åœ¨å¯æ§èŒƒå›´å†…ã€‚
</aside>
<h3 id="_2-3-æŸ¯é‡ŒåŒ–" tabindex="-1">2.3 æŸ¯é‡ŒåŒ– <a class="header-anchor" href="#_2-3-æŸ¯é‡ŒåŒ–" aria-label="Permalink to &quot;2.3 æŸ¯é‡ŒåŒ–&quot;">&ZeroWidthSpace;</a></h3>
<hr>
<p>å…ˆçœ‹ç¤ºä¾‹ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> _ </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">require</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">lodash</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(Math</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">pow</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(Math</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">pow</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(Math</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">pow</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">3</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #BABED8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// æ‰‹åŠ¨æŸ¯é‡ŒåŒ–</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> getPower </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">power</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">number</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> Math</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">pow</span><span style="color: #BABED8">(number</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> power)</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> power2 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">getPower</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">2</span><span style="color: #BABED8">) </span><span style="color: #676E95; font-style: italic">// å¾—åˆ°ä¸€ä¸ªä¸“é—¨æ±‚å¹³æ–¹çš„å‡½æ•°</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> power3 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">getPower</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">3</span><span style="color: #BABED8">) </span><span style="color: #676E95; font-style: italic">// å¾—åˆ°ä¸€ä¸ªä¸“é—¨æ±‚ç«‹æ–¹çš„å‡½æ•°</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">power2</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">2</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">power2</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">3</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">power3</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">3</span><span style="color: #BABED8">))</span></span></code></pre>
</div><p><strong>ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–ï¼Ÿ</strong></p>
<blockquote>
<p>æŸ¯é‡ŒåŒ–æ˜¯ lambda æ¼”ç®—ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œä½†ä¸è¦è¢«å®ƒå“åˆ°ï¼Œå®ƒå¾ˆå®¹æ˜“å®ç°ã€‚æŸ¯é‡ŒåŒ–æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¸€æ¬¡æ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæœŸå¾…ä¸‹ä¸€ä¸ªå‚æ•°çš„æ–°å‡½æ•°ã€‚å®ƒæ˜¯ä¸€ç§å‡½æ•°è½¬æ¢ï¼Œå°†å‡½æ•°ä» f(a, b, c) çš„å¯è°ƒç”¨å‡½æ•°è½¬æ¢ä¸º f(a)(b)(c) çš„å¯è°ƒç”¨å‡½æ•°ã€‚</p>
</blockquote>
<p><strong>javascript ä¸­çš„æŸ¯é‡ŒåŒ–æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<blockquote>
<p>æŸ¯é‡ŒåŒ–åªæ˜¯æ„å‘³ç€è¯„ä¼°å…·æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¹¶å°†å®ƒä»¬åˆ†è§£ä¸ºå…·æœ‰å•ä¸ªå‚æ•°çš„å‡½æ•°åºåˆ—ã€‚æŸ¯é‡ŒåŒ–æ˜¯å½“ä¸€ä¸ªå‡½æ•°ä¸æ˜¯ä¸€æ¬¡æ¥å—æ‰€æœ‰å‚æ•°ï¼Œè€Œæ˜¯æ¥å—ç¬¬ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ç¬¬äºŒä¸ªå‚æ•°å¹¶åˆè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰è®ºè¯å®Œæ¯•ã€‚</p>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æŸ¯é‡ŒåŒ–ï¼Ÿ</strong></p>
<ul>
<li>é¿å…ä¸€æ¬¡åˆä¸€æ¬¡åœ°ä¼ é€’ç›¸åŒçš„å˜é‡</li>
<li>å°†æ‚¨åŠŸèƒ½åˆ’åˆ†ä¸ºå¤šä¸ªæ›´ç»†ç²’åº¦çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥å¤„ç†æŸä¸€é¡¹èŒè´£ã€‚ä½¿åŠŸèƒ½æ›´åŠ çº¯å‡€ï¼Œä¸æ˜“å‡ºé”™å’Œäº§ç”Ÿå‰¯ä½œç”¨ã€‚</li>
<li>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ç”¨äºåˆ›å»ºé«˜é˜¶å‡½æ•°ã€‚</li>
</ul>
<p><strong>å¦‚ä½•å®ç°æŸ¯é‡ŒåŒ–ï¼Ÿ</strong></p>
<p>å…ˆçœ‹çœ‹ lodash å®ç°çš„çš„é€šç”¨æŸ¯é‡ŒåŒ–æ–¹æ³•ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> _ </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">require</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">lodash</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> threeSum </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">a</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">b</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">c</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> a </span><span style="color: #89DDFF">+</span><span style="color: #BABED8"> b </span><span style="color: #89DDFF">+</span><span style="color: #BABED8"> c</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> getSum </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.**</span><span style="color: #BABED8">curry</span><span style="color: #89DDFF">**</span><span style="color: #BABED8">(threeSum)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">getSum</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #BABED8">)) </span><span style="color: #676E95; font-style: italic">//6 ï¼Œå®å‚ä¸å½¢å‚ä¸ªæ•°ç›¸åŒæ—¶ç›´æ¥è¿”å›ç»“æœ</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">getSum</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #BABED8">)(</span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3</span><span style="color: #BABED8">)) </span><span style="color: #676E95; font-style: italic">//6 ï¼Œå®å‚ä¸å½¢å‚ä¸ªæ•°ä¸åŒæ—¶è¿”å›ä¸€ä¸ªå‡½æ•°</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">getSum</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #BABED8">)(</span><span style="color: #F78C6C">3</span><span style="color: #BABED8">)) </span><span style="color: #676E95; font-style: italic">//6</span></span></code></pre>
</div><p>æ¨¡æ‹Ÿå®ç° lodash çš„ curry æ–¹æ³•ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> curry </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">f</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">(...</span><span style="color: #BABED8; font-style: italic">args1</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #BABED8">args1</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">length</span><span style="color: #F07178"> </span><span style="color: #89DDFF">===</span><span style="color: #F07178"> </span><span style="color: #BABED8">f</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">length</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #89DDFF">      </span><span style="color: #676E95; font-style: italic">// ä½¿ç”¨f.lengthå¯ä»¥è·å–åŸå‡½æ•°fçš„å½¢å‚ä¸ªæ•°ï¼</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">f</span><span style="color: #F07178">(</span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args1</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">else</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">(...</span><span style="color: #BABED8; font-style: italic">args2</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #82AAFF">f</span><span style="color: #F07178">(</span><span style="color: #89DDFF">...</span><span style="color: #F07178">[</span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args1</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args2</span><span style="color: #F07178">])</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// è¿›ä¸€æ­¥ç®€åŒ–ï¼ˆæ²¡å¿…è¦ï¼Œå¯è¯»æ€§å·®ï¼‰</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> curry2 </span><span style="color: #89DDFF">=</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">f</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">(...</span><span style="color: #BABED8; font-style: italic">args1</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span></span>
<span class="line"><span style="color: #BABED8">    args1</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">length </span><span style="color: #89DDFF">===</span><span style="color: #BABED8"> f</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">length </span><span style="color: #89DDFF">?</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">f</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args1) </span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(...</span><span style="color: #BABED8; font-style: italic">args2</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">f</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">...</span><span style="color: #BABED8">[</span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">...</span><span style="color: #BABED8">args2])</span></span></code></pre>
</div><h3 id="_2-4-å‡½æ•°ç»„åˆ" tabindex="-1">2.4 å‡½æ•°ç»„åˆ <a class="header-anchor" href="#_2-4-å‡½æ•°ç»„åˆ" aria-label="Permalink to &quot;2.4 å‡½æ•°ç»„åˆ&quot;">&ZeroWidthSpace;</a></h3>
<hr>
<p>å‡½æ•°ç»„åˆå¯ä»¥æŠŠç»†ç²’åº¦çš„å‡½æ•°é‡æ–°ç»„åˆæˆä¸€ä¸ªæ–°å‡½æ•°</p>
<p>ç¤ºä¾‹ï¼šå°†<code>â€NEVER SAY NEVERâ€</code> ç±»å‹çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º <code>â€œnever-say-neverâ€</code>å½¢å¼</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> s </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">NEVER SAY NEVER</span><span style="color: #89DDFF">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> temp1 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">split</span><span style="color: #BABED8">(s</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> temp2 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">map</span><span style="color: #BABED8">(l1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">i</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> i</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">toLowerCase</span><span style="color: #BABED8">())</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> result </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">join</span><span style="color: #BABED8">(l2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">-</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(s</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> temp1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> temp2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> result)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// 1.ç›´æ¥åµŒå¥—è°ƒç”¨</span></span>
<span class="line"><span style="color: #BABED8">_</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">join</span><span style="color: #BABED8">(</span></span>
<span class="line"><span style="color: #BABED8">  _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">map</span><span style="color: #BABED8">(_</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">split</span><span style="color: #BABED8">(s</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">i</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> i</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">toLowerCase</span><span style="color: #BABED8">())</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">-</span><span style="color: #89DDFF">&quot;</span></span>
<span class="line"><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// 2.ä½¿ç”¨lodashé€šç”¨æ–¹æ³•ç»„åˆå‡½æ•°</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> f1 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">tag</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">s</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">split</span><span style="color: #BABED8">(s</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> tag)</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> f2 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">fn</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">list</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">map</span><span style="color: #BABED8">(list</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> fn)</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> f3 </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">tag</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">list</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">join</span><span style="color: #BABED8">(list</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> tag)</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> f </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">flow</span><span style="color: #BABED8">(</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #82AAFF">f1</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #82AAFF">f2</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">i</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> i</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">toLowerCase</span><span style="color: #BABED8">())</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #82AAFF">f3</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">-</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #82AAFF">f</span><span style="color: #BABED8">(s)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// æ¨¡æ‹Ÿå®ç°lodashä¸­çš„flowç»„åˆå‡½æ•°</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> compose </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(...</span><span style="color: #BABED8; font-style: italic">args</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">args</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">reduce</span><span style="color: #F07178">(</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">preValue</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8; font-style: italic">currentFn</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #82AAFF">currentFn</span><span style="color: #F07178">(</span><span style="color: #BABED8">preValue</span><span style="color: #F07178">)</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8">value</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #82AAFF">compose</span><span style="color: #BABED8">(filterListNumber</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> getListSum)(l))</span></span></code></pre>
</div><p>ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œä½¿ç”¨ lodash æä¾›çš„å‡½æ•°æ²¡æœ‰è¢«æŸ¯é‡ŒåŒ–ï¼Œæ— æ³•ç›´æ¥è¿›è¡Œç»„åˆï¼Œéœ€è¦æ‰‹åŠ¨æŸ¯é‡ŒåŒ–å°è£…æ‰èƒ½ç»„åˆä½¿ç”¨ã€‚è€Œ <code>lodash/fp</code> æ¨¡å—æä¾›å·²ç»æŸ¯é‡ŒåŒ–çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ç»„åˆï¼Œæ–¹ä¾¿å‡½æ•°å¼ç¼–ç¨‹ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> fp </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">require</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">lodash/fp</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> s </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">NEVER SAY NEVER</span><span style="color: #89DDFF">&quot;</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> f </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">flow</span><span style="color: #BABED8">(</span></span>
<span class="line"><span style="color: #BABED8">  fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">split</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">map</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">i</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> i</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">toLowerCase</span><span style="color: #BABED8">())</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">join</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">-</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #82AAFF">f</span><span style="color: #BABED8">(s)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// æ›´å¤æ‚çš„ç»„åˆå¦‚ä¸‹ï¼š</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> fn </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">flow</span><span style="color: #BABED8">(fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">join</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">. </span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">map</span><span style="color: #BABED8">(fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">flow</span><span style="color: #BABED8">(fp</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">first</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> fp</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">toUpper))</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> fp</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">split</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">))</span></span></code></pre>
</div><aside>
ğŸ’¡ ç»„åˆå‡½æ•°çš„è°ƒè¯•ï¼šå¦‚æœéœ€è¦è°ƒè¯•å‡½æ•°ç»„åˆçš„ä¸­é—´ç»“æœï¼Œå¯ä»¥åŠ ä¸€å±‚æ‰“å°ä¸­é—´ç»“æœã€‚
</aside>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> logger </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> _</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">curry</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">tag</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">tag</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #BABED8">value</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> f </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">compose</span><span style="color: #BABED8">(f1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">logger</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">f1æ‰§è¡Œåï¼š</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> f2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">logger</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">f2æ‰§è¡Œåï¼š</span><span style="color: #89DDFF">&quot;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> f3)</span></span></code></pre>
</div><br/>
<p><strong>å‚è€ƒæ–‡æ¡£</strong></p>
<ol>
<li><a href="https://blog.logrocket.com/understanding-javascript-currying/" target="_blank" rel="noreferrer">Understanding JavaScript currying - LogRocket Blog</a></li>
</ol>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaScript å¼‚æ­¥ç¼–ç¨‹]]></title>
            <link>localhost/blog/blog/posts/JavaScript-asyc.html</link>
            <guid>localhost/blog/blog/posts/JavaScript-asyc.html</guid>
            <pubDate>Thu, 01 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[<p>JavaScriptçš„ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§æ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œè¿™é‡Œçš„å•çº¿ç¨‹æ˜¯æŒ‡ä»£ç çš„æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ï¼ˆå®¿ä¸»ç¯å¢ƒçš„APIå¯ä»¥å¤šçº¿ç¨‹ï¼‰ï¼Œå…¶æœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†é¿å…å¤šçº¿ç¨‹çš„DOMæ“ä½œå¯èƒ½å¸¦æ¥çš„é”™ä¹±ã€‚ä¼˜ç‚¹æ˜¯æ›´å®‰å…¨ç®€å•ï¼Œç¼ºç‚¹æ˜¯å½“é‡åˆ°ä¸€ä¸ªè€—æ—¶ä»»åŠ¡æ—¶ï¼Œåé¢çš„ä»»åŠ¡ä¼šè¢«é˜»å¡ï¼Œä»è€Œæ‹–å»¶æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œã€‚</p>
<p>ä¸ºäº†è§£å†³è€—æ—¶ä»»åŠ¡é˜»å¡çº¿ç¨‹çš„é—®é¢˜ï¼ŒJavaScriptå°†ä»»åŠ¡çš„æ‰§è¡Œæ¨¡å¼åˆ†ä¸ºäº†åŒæ­¥æ¨¡å¼å’Œå¼‚æ­¥æ¨¡å¼ï¼Œè¿è¡Œç¯å¢ƒä¹Ÿæä¾›äº†ä»¥åŒæ­¥æˆ–è€…å¼‚æ­¥æ¨¡å¼è¿è¡Œçš„APIã€‚</p>
<ul>
<li><strong>åŒæ­¥æ¨¡å¼</strong>: ä»»åŠ¡æ’é˜Ÿæ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹å®¹æ˜“ç†è§£ã€‚</li>
<li><strong>å¼‚æ­¥æ¨¡å¼</strong>: å¯¹äºè€—æ—¶æ“ä½œï¼Œå¼€å¯è¿‡åå°±ç«‹å³å¾€åæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œå¼‚æ­¥åç»­çš„é€»è¾‘ä¸€èˆ¬é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼å®šä¹‰ï¼Œåœ¨è€—æ—¶ä»»åŠ¡æ‰§è¡Œè¿‡åå°±ä¼šè‡ªåŠ¨æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚</li>
</ul>
<img src="/2023/promise0.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<p>JavaScriptå¼•æ“ä¼šå…ˆæ‰§è¡Œå®Œè°ƒç”¨æ ˆä¸­çš„ä»»åŠ¡ï¼Œç„¶åé€šè¿‡äº‹ä»¶å¾ªç¯ä»â€œæ¶ˆæ¯é˜Ÿåˆ—â€ä¸­å†å–ä¸€ä¸ªå‡ºæ¥æ‰§è¡Œï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥éšæ—¶å†å¾€æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºå¤§é‡çš„å¼‚æ­¥æ¨¡å¼çš„APIå¯¼è‡´ä»£ç ä¸€äº›å¤æ‚çš„å¼‚æ­¥é€»è¾‘ä¸æ˜“é˜…è¯»ã€‚</p>
<nav class="table-of-contents"><ul><li><a href="#_1-å›è°ƒå‡½æ•°">1. å›è°ƒå‡½æ•°</a></li><li><a href="#_2-promise">2. Promise</a><ul><li><a href="#_2-1-promise-çš„åŸºæœ¬ç”¨æ³•">2.1 Promise çš„åŸºæœ¬ç”¨æ³•</a></li><li><a href="#_2-2-promise-å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°">2.2 Promise å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°</a></li><li><a href="#_2-3-promise-çš„é“¾å¼è°ƒç”¨">2.3 Promise çš„é“¾å¼è°ƒç”¨</a></li><li><a href="#_2-4-promise-çš„å¼‚å¸¸å¤„ç†">2.4 Promise çš„å¼‚å¸¸å¤„ç†</a></li><li><a href="#_2-5-promise-çš„é™æ€æ–¹æ³•">2.5 Promise çš„é™æ€æ–¹æ³•</a></li><li><a href="#_2-6-promise-å¹¶è¡Œæ‰§è¡Œ">2.6 Promise å¹¶è¡Œæ‰§è¡Œ</a></li><li><a href="#_2-7-promise-çš„æ‰§è¡Œæ—¶åº-å®ä»»åŠ¡-å¾®ä»»åŠ¡">2.7 Promise çš„æ‰§è¡Œæ—¶åºï¼ˆå®ä»»åŠ¡&amp;å¾®ä»»åŠ¡ï¼‰</a></li></ul></li></ul></nav>
<h2 id="_1-å›è°ƒå‡½æ•°" tabindex="-1">1. å›è°ƒå‡½æ•° <a class="header-anchor" href="#_1-å›è°ƒå‡½æ•°" aria-label="Permalink to &quot;1. å›è°ƒå‡½æ•°&quot;">&ZeroWidthSpace;</a></h2>
<p>å›è°ƒå‡½æ•°æ˜¯æ‰€æœ‰å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆçš„æ ¹åŸºï¼Œå›è°ƒå‡½æ•°ç”±è°ƒç”¨è€…å®šä¹‰ï¼Œäº¤ç»™æ‰§è¡Œè€…æ‰§è¡Œï¼Œå…·ä½“ç”¨æ³•å°±æ˜¯æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç½¢äº†ã€‚</p>
<p>é™¤äº†ä¼ é€’å›è°ƒå‡½æ•°å‚æ•°ä»¥å¤–ï¼Œè¿˜æœ‰å‡ ç§å¸¸è§çš„å®ç°å¼‚æ­¥çš„æ–¹å¼å¦‚äº‹ä»¶æœºåˆ¶ã€å‘å¸ƒè®¢é˜…ï¼Œå¯ä»¥ç†è§£ä¸ºå›è°ƒå‡½æ•°çš„å˜ä½“ã€‚</p>
<p>å½“ä½¿ç”¨ä¼ ç»Ÿå›è°ƒæ–¹å¼å»å®Œæˆå¤æ‚çš„å¼‚æ­¥æµç¨‹æ—¶ï¼Œä¼šæ— æ³•é¿å…å¤§é‡çš„å›è°ƒå‡½æ•°åµŒå¥—ï¼Œé€ æˆå›è°ƒåœ°ç‹±é—®é¢˜</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">setTimeout</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">1.æ‰§è¡Œä»»åŠ¡1 -&gt; ä¸‰ç§’åæ‰§è¡Œä»»åŠ¡2</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #82AAFF">setTimeout</span><span style="color: #F07178">(</span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">2.æ‰§è¡Œä»»åŠ¡2 -&gt; 2ç§’åæ‰§è¡Œä»»åŠ¡1</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">setTimeout</span><span style="color: #F07178">(</span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">3.æ‰§è¡Œä»»åŠ¡3 -&gt; 1ç§’åæ‰§è¡Œå®Œæ¯•</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">      </span><span style="color: #676E95; font-style: italic">// å›è°ƒåœ°ç‹±...</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">},</span><span style="color: #F07178"> </span><span style="color: #F78C6C">1000</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">},</span><span style="color: #F07178"> </span><span style="color: #F78C6C">2000</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">},</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3000</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h2 id="_2-promise" tabindex="-1">2. Promise <a class="header-anchor" href="#_2-promise" aria-label="Permalink to &quot;2. Promise&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>ä¸ºäº†é¿å…å›è°ƒåœ°ç‹±é—®é¢˜</strong>ï¼ŒCommonJSç¤¾åŒºæå‡ºäº†Promiseè§„èŒƒï¼Œå¹¶åœ¨ES2015ä¸­è¢«æ ‡å‡†åŒ–ã€‚Promiseå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œè¿‡åç©¶ç«Ÿæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥åªéœ€è¦æ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°å³å¯ã€‚</p>
<img src="/2023/promise1.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<h3 id="_2-1-promise-çš„åŸºæœ¬ç”¨æ³•" tabindex="-1">2.1 Promise çš„åŸºæœ¬ç”¨æ³• <a class="header-anchor" href="#_2-1-promise-çš„åŸºæœ¬ç”¨æ³•" aria-label="Permalink to &quot;2.1 Promise çš„åŸºæœ¬ç”¨æ³•&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>æ„å»ºPromiseå®ä¾‹æ—¶ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„å‚æ•°ä¸ºä¸¤ä¸ªå¤„ç†å‡½æ•°ï¼Œåœ¨Promiseé‡Œç¼–å†™æ‰¿è¯ºçš„é€»è¾‘ï¼Œå³ä»€ä¹ˆæƒ…å†µä¸‹æˆåŠŸï¼Œä»€ä¹ˆæƒ…å†µä¸‹å¤±è´¥ï¼Œå¹¶åœ¨æˆåŠŸæˆ–å¤±è´¥æ—¶æ”¹å˜çŠ¶æ€ï¼Œæ‰§è¡Œæå‰æ³¨å†Œçš„å¤„ç†å‡½æ•°</li>
<li>ä½¿ç”¨thenæ–¹æ³•åˆ†åˆ«æ³¨å†Œpromiseå®ä¾‹çš„onFulfilledonå’ŒonRejectedå›è°ƒå‡½æ•°</li>
<li>æ³¨æ„æ³¨å†Œçš„å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰å¾…åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼ˆå¦‚ä¸‹ä¾‹ï¼‰</li>
</ol>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> a </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> b </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> promise </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">rej</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #BABED8">a</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&gt;</span><span style="color: #F07178"> </span><span style="color: #BABED8">b</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">res</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">success</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">) </span><span style="color: #676E95; font-style: italic">// æˆåŠŸæ—¶è°ƒç”¨reså‡½æ•°</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">else</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">rej</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">fail</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)    </span><span style="color: #676E95; font-style: italic">// å¤±è´¥æ—¶è°ƒç”¨rejå‡½æ•°</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">sucStr</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">sucStr</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">},</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">failStr</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">failStr</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ç¬¬ä¸€ä¸ªåŒæ­¥ä»»åŠ¡æ‰§è¡Œæ‰ä¼šæ‰§è¡Œæå‰æ³¨å†Œçš„å¼‚æ­¥å¤„ç†å‡½æ•°</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h3 id="_2-2-promise-å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°" tabindex="-1">2.2 Promise å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•° <a class="header-anchor" href="#_2-2-promise-å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°" aria-label="Permalink to &quot;2.2 Promise å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// ä½¿ç”¨promiseå°è£…ä¸€ä¸ªajaxè¯·æ±‚</span></span>
<span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">ajax</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">url</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #F07178">(</span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">resolve</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8; font-style: italic">reject</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">xhr</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">XMLHttpRequest</span><span style="color: #F07178">()</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">open</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">GET</span><span style="color: #89DDFF">&#39;</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8">url</span><span style="color: #F07178">)        </span><span style="color: #676E95; font-style: italic">// æŒ‡å®šè¯·æ±‚æ–¹æ³•å’Œåœ°å€</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">responseType</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">   </span><span style="color: #676E95; font-style: italic">// æŒ‡å®šç›¸åº”ç±»å‹ä¸ºjson</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">onload</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span><span style="color: #F07178">  </span><span style="color: #676E95; font-style: italic">// è¯·æ±‚å®Œæˆåæ‰§è¡Œonloadå‡½æ•°</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">status</span><span style="color: #F07178"> </span><span style="color: #89DDFF">===</span><span style="color: #F07178"> </span><span style="color: #F78C6C">200</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">        </span><span style="color: #82AAFF">resolve</span><span style="color: #F07178">(</span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">response</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">else</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">        </span><span style="color: #82AAFF">reject</span><span style="color: #F07178">(</span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">Error</span><span style="color: #F07178">(</span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">status</span><span style="color: #F07178">))</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">send</span><span style="color: #F07178">()</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/user.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">res</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">},</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">err</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">err</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h3 id="_2-3-promise-çš„é“¾å¼è°ƒç”¨" tabindex="-1">2.3 Promise çš„é“¾å¼è°ƒç”¨ <a class="header-anchor" href="#_2-3-promise-çš„é“¾å¼è°ƒç”¨" aria-label="Permalink to &quot;2.3 Promise çš„é“¾å¼è°ƒç”¨&quot;">&ZeroWidthSpace;</a></h3>
<p>promiseçš„æœ¬è´¨ä¹Ÿæ˜¯ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå³é€šè¿‡thenæ–¹æ³•ä¼ é€’è¿›å»ï¼Œè€Œä¸”promiseå°†å›è°ƒåˆ†æˆäº†ä¸¤ç§å³æˆåŠŸçš„å›è°ƒå’Œå¤±è´¥çš„å›è°ƒã€‚ä½†æ˜¯å¦‚æœéœ€è¦ä¸²è”æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œè¿˜æ˜¯ä¼šå‡ºç°å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œè¿™æ—¶å€™ä½¿ç”¨promiseå°±æ²¡æœ‰ä»»ä½•æ„ä¹‰äº†ï¼Œè¿˜é¢å¤–å¢åŠ äº†å¤æ‚åº¦ã€‚</p>
<p>æ‰€ä»¥åµŒå¥—ä½¿ç”¨promiseæ˜¯ä¸å¯å–çš„ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨promiseæ–¹æ³•é“¾å¼è°ƒç”¨çš„ç‰¹ç‚¹æ¥å°½é‡ä¿è¯ä¸²è”å¼‚æ­¥ä»»åŠ¡çš„ â€œæ‰å¹³åŒ–â€ã€‚</p>
<ul>
<li>promiseçš„thenæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª<strong>å…¨æ–°çš„</strong>promiseå¯¹è±¡ï¼Œç”¨äºå®ç°promiseçš„é“¾å¼è°ƒç”¨</li>
<li>åé¢çš„thenå°±æ˜¯åœ¨ä¸ºå‰é¢thenè¿”å›çš„promiseæ³¨å†Œå›è°ƒ</li>
<li>å‰é¢thenæ–¹æ³•ä¸­è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼ä¼šä½œä¸ºåé¢thenæ–¹æ³•å›è°ƒçš„å‚æ•°</li>
<li>è‹¥å›è°ƒä¸­è¿”å›çš„æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œåˆ™åé¢thenæ–¹æ³•çš„å›è°ƒä¼šç­‰å¾…ä»–çš„ç»“æŸ</li>
</ul>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url2</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url3</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url4</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>å¤šæ¬¡catchçš„é“¾å¼è°ƒç”¨ï¼ˆ<em>for test</em>ï¼‰ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> p </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">reject</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Error</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">fail1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">p</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">err</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(err))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok2</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #89DDFF">{</span><span style="color: #89DDFF; font-style: italic">throw</span><span style="color: #F07178"> </span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">Error</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">fail2</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">err</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(err))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok3</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok4</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span></code></pre>
</div><h3 id="_2-4-promise-çš„å¼‚å¸¸å¤„ç†" tabindex="-1">2.4 Promise çš„å¼‚å¸¸å¤„ç† <a class="header-anchor" href="#_2-4-promise-çš„å¼‚å¸¸å¤„ç†" aria-label="Permalink to &quot;2.4 Promise çš„å¼‚å¸¸å¤„ç†&quot;">&ZeroWidthSpace;</a></h3>
<p>é™¤äº†promiseçš„æ‰§è¡Œé€»è¾‘æ‰§è¡Œäº†rejectå‡½æ•°ï¼Œåœ¨promiseåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯æˆ–è€…ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ä¹Ÿä¼šæ‰§è¡Œrejectå‡½æ•°ï¼Œæ‰€ä»¥thenæ–¹æ³•ä¸­æ³¨å†Œçš„onrejectedå‡½æ•°å°±æ˜¯ä¸ºpromiseçš„å¼‚å¸¸åšå¤„ç†ï¼Œå³promiseå¤±è´¥æˆ–è€…å‡ºç°å¼‚å¸¸éƒ½ä¼šè¢«æ‰§è¡Œã€‚å…¶å®onrejectedå‡½æ•°çš„æ³¨å†Œè¿˜æœ‰ä¸€ä¸ªæ›´å¸¸è§çš„ç”¨æ³•ï¼Œå³ä½¿ç”¨promiseå®ä¾‹çš„catchæ–¹æ³•æ³¨å†Œonrejectedå›è°ƒ</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/user.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onFulfilled</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">res</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onRejcted</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// ç­‰åŒäº</span></span>
<span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/user.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onFulfilled</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">res</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">undefined,</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onRejcted</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>ç”¨catchæ–¹æ³•æ›´å¸¸è§ï¼Œå› ä¸ºæ›´é€‚åˆé“¾å¼è°ƒç”¨ã€‚é”™è¯¯ä¼šéšç€promiseé“¾æ¡ä¼ é€’ï¼Œæ‰€ä»¥æœ€åä½¿ç”¨c<strong>atchæ–¹æ³•æ›´åƒæ˜¯ç»™æ•´ä¸ªpromiseé“¾æ¡æ³¨å†Œçš„å¤±è´¥å›è°ƒ</strong></p>
<h3 id="_2-5-promise-çš„é™æ€æ–¹æ³•" tabindex="-1">2.5 Promise çš„é™æ€æ–¹æ³• <a class="header-anchor" href="#_2-5-promise-çš„é™æ€æ–¹æ³•" aria-label="Permalink to &quot;2.5 Promise çš„é™æ€æ–¹æ³•&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">resolve</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">success</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)  </span><span style="color: #676E95; font-style: italic">// ç›´æ¥è¿”å›ä¸€ä¸ªæˆåŠŸçš„Promiseå¯¹è±¡</span></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">resolve</span><span style="color: #BABED8">(promise)    </span><span style="color: #676E95; font-style: italic">// å¦‚æœæ¥æ”¶åˆ°ä¸€ä¸ªpromiseå¯¹è±¡åˆ™åŸæ ·è¿”å›</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">reject</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Error</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">rejected</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)) </span><span style="color: #676E95; font-style: italic">// å¿«é€Ÿå¾—åˆ°ä¸€ä¸ªä¸€å®šæ˜¯å¤±è´¥çš„promiseå¯¹è±¡</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(err))</span></span></code></pre>
</div><h3 id="_2-6-promise-å¹¶è¡Œæ‰§è¡Œ" tabindex="-1">2.6 Promise å¹¶è¡Œæ‰§è¡Œ <a class="header-anchor" href="#_2-6-promise-å¹¶è¡Œæ‰§è¡Œ" aria-label="Permalink to &quot;2.6 Promise å¹¶è¡Œæ‰§è¡Œ&quot;">&ZeroWidthSpace;</a></h3>
<p>å‰é¢éƒ½æ˜¯å¤šä¸ªpromiseä¸²è”æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œè€Œå½“å¤šä¸ªä»»åŠ¡å½¼æ­¤æ²¡æœ‰ä¾èµ–æ—¶å¯ä»¥å¹¶è¡Œæ‰§è¡Œæ¥æé«˜æ‰§è¡Œé€Ÿåº¦ï¼ŒPromise.allæ–¹æ³•å¯ä»¥å°†å¤šä¸ªpromiseåˆå¹¶ä¸ºä¸€ä¸ªpromiseç»Ÿä¸€ç®¡ç†ã€‚Promise.all()æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…¨æ–°çš„promiseå¯¹è±¡ï¼Œå½“å…¶å†…éƒ¨æ‰€æœ‰çš„promiseéƒ½å®Œæˆåï¼Œè¿™ä¸ªæ–°çš„promiseå¯¹è±¡æ‰ä¼šå®Œæˆï¼Œä¸”å…¶æ‹¿åˆ°çš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«æ¯ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œçš„ç»“æœã€‚å…¶ä¸­ä»»ä½•ä¸€ä¸ªpromiseå¤±è´¥ï¼Œè¿™ä¸ªæ–°çš„promiseä¹Ÿå°±å¤±è´¥äº†ã€‚</p>
<p>ç¤ºä¾‹ï¼šå…ˆæ‹¿åˆ°è¦è®¿é—®çš„urlåˆ—è¡¨ï¼Œå†å¹¶è¡Œè®¿é—®</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/urls.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">urls</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">Object</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">values</span><span style="color: #F07178">(</span><span style="color: #BABED8">value</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">tasks</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">urls</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">map</span><span style="color: #F07178">(</span><span style="color: #BABED8; font-style: italic">map</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #BABED8">url</span><span style="color: #F07178">))</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">all</span><span style="color: #F07178">(</span><span style="color: #BABED8">tasks</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">values</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">values</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>Promise.race()ä¹Ÿå¯ä»¥å°†å¤šä¸ªpromiseåˆå¹¶ä¸ºä¸€ä¸ªpromiseå¯¹è±¡ï¼Œä½†Promise.all()ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸæ‰ä¼šç»“æŸï¼Œè€ŒPromise.race()åªä¼šç­‰å¾…ç¬¬ä¸€ä¸ªå…ˆç»“æŸçš„ä»»åŠ¡ã€‚</p>
<p>ç¤ºä¾‹ï¼šä¸€ä¸ªè¯·æ±‚promise+ä¸€ä¸ªå®šæ—¶promiseç”¨äºå¤„ç†è¯·æ±‚è¶…æ—¶</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> request </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/urls.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> timeout </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">resolve</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">reject</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #82AAFF">setTimeout</span><span style="color: #F07178">(</span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #82AAFF">reject</span><span style="color: #F07178">(</span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">Error</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">timeout</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">))</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #F78C6C">500</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">race</span><span style="color: #BABED8">([</span></span>
<span class="line"><span style="color: #BABED8">  request</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  timeout</span></span>
<span class="line"><span style="color: #BABED8">])</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #F07178"> </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">value</span><span style="color: #F07178">) </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #F07178"> </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">) </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h3 id="_2-7-promise-çš„æ‰§è¡Œæ—¶åº-å®ä»»åŠ¡-å¾®ä»»åŠ¡" tabindex="-1">2.7 Promise çš„æ‰§è¡Œæ—¶åºï¼ˆå®ä»»åŠ¡&amp;å¾®ä»»åŠ¡ï¼‰ <a class="header-anchor" href="#_2-7-promise-çš„æ‰§è¡Œæ—¶åº-å®ä»»åŠ¡-å¾®ä»»åŠ¡" aria-label="Permalink to &quot;2.7 Promise çš„æ‰§è¡Œæ—¶åºï¼ˆå®ä»»åŠ¡&amp;å¾®ä»»åŠ¡ï¼‰&quot;">&ZeroWidthSpace;</a></h3>
<p>å³ä½¿Promiseæ²¡æœ‰ä»»ä½•çš„å¼‚æ­¥æ“ä½œï¼Œå®ƒçš„å›è°ƒå‡½æ•°ä»ç„¶ä¸ä¼šç«‹å³æ‰§è¡Œè€Œæ˜¯è¿›å…¥å›è°ƒé˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œå³ç­‰å¾…æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œåæ‰ä¼šæ‰§è¡Œã€‚</p>
<p>ä½†åœ¨å›è°ƒé˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…çš„ä»»åŠ¡å¹¶ä¸æ˜¯å¹³ç­‰çš„ã€‚å›è°ƒé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ç§°ä¸ºå®ä»»åŠ¡ï¼Œå®ä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥ä¸´æ—¶åŠ ä¸Šä¸€äº›é¢å¤–éœ€æ±‚ï¼Œè¿™äº›ä¸´æ—¶éœ€æ±‚å¯ä»¥ä½œä¸ºæ–°çš„å®ä»»åŠ¡è¿›åˆ°é˜Ÿåˆ—æ’é˜Ÿï¼ˆå¦‚ä¸‹setTimeoutå›è°ƒï¼‰ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå½“å‰ä»»åŠ¡çš„å¾®ä»»åŠ¡ï¼Œç›´æ¥åœ¨æœ¬è½®è°ƒç”¨çš„æœ«å°¾ç«‹å³æ‰§è¡Œï¼ˆå¦‚ä¸‹Promiseå›è°ƒï¼‰ï¼Œå¾®ä»»åŠ¡çš„æ¦‚å¿µæ˜¯åæ¥æ‰æåˆ°JSä¸­çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†æé«˜æ•´ä½“å“åº”èƒ½åŠ›ã€‚ç›®å‰ç»å¤§å¤šæ•°å¼‚æ­¥è°ƒç”¨çš„APIéƒ½æ˜¯ä½œä¸ºå®ä»»åŠ¡æ‰§è¡Œï¼Œè€Œä½œä¸ºå¾®ä»»åŠ¡çš„æœ‰Promise &amp; MutationObserver &amp; Nodeä¸­çš„process.nextTick</p>
<aside>
ğŸ’¡ åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æœ‰ä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼šå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆ–æ¯æ¬¡ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œéƒ½ä¼šä¼˜å…ˆæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚
<p>åœ¨Nodeä¸­ï¼Œä»»åŠ¡é˜Ÿåˆ—çš„ä¼˜å…ˆçº§åˆ’åˆ†æ¯”æµè§ˆå™¨æ›´åŠ ç»†åŒ–ã€‚</p>
</aside>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">start</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">setTimeout</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">settimeout</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">0</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">resolve</span><span style="color: #BABED8">()</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">promise1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">promise2</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">promise3</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">end</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">//</span></span></code></pre>
</div>]]></description>
            <content:encoded><![CDATA[<p>JavaScriptçš„ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§æ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œè¿™é‡Œçš„å•çº¿ç¨‹æ˜¯æŒ‡ä»£ç çš„æ‰§è¡Œæ˜¯å•çº¿ç¨‹çš„ï¼ˆå®¿ä¸»ç¯å¢ƒçš„APIå¯ä»¥å¤šçº¿ç¨‹ï¼‰ï¼Œå…¶æœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†é¿å…å¤šçº¿ç¨‹çš„DOMæ“ä½œå¯èƒ½å¸¦æ¥çš„é”™ä¹±ã€‚ä¼˜ç‚¹æ˜¯æ›´å®‰å…¨ç®€å•ï¼Œç¼ºç‚¹æ˜¯å½“é‡åˆ°ä¸€ä¸ªè€—æ—¶ä»»åŠ¡æ—¶ï¼Œåé¢çš„ä»»åŠ¡ä¼šè¢«é˜»å¡ï¼Œä»è€Œæ‹–å»¶æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œã€‚</p>
<p>ä¸ºäº†è§£å†³è€—æ—¶ä»»åŠ¡é˜»å¡çº¿ç¨‹çš„é—®é¢˜ï¼ŒJavaScriptå°†ä»»åŠ¡çš„æ‰§è¡Œæ¨¡å¼åˆ†ä¸ºäº†åŒæ­¥æ¨¡å¼å’Œå¼‚æ­¥æ¨¡å¼ï¼Œè¿è¡Œç¯å¢ƒä¹Ÿæä¾›äº†ä»¥åŒæ­¥æˆ–è€…å¼‚æ­¥æ¨¡å¼è¿è¡Œçš„APIã€‚</p>
<ul>
<li><strong>åŒæ­¥æ¨¡å¼</strong>: ä»»åŠ¡æ’é˜Ÿæ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹å®¹æ˜“ç†è§£ã€‚</li>
<li><strong>å¼‚æ­¥æ¨¡å¼</strong>: å¯¹äºè€—æ—¶æ“ä½œï¼Œå¼€å¯è¿‡åå°±ç«‹å³å¾€åæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œå¼‚æ­¥åç»­çš„é€»è¾‘ä¸€èˆ¬é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼å®šä¹‰ï¼Œåœ¨è€—æ—¶ä»»åŠ¡æ‰§è¡Œè¿‡åå°±ä¼šè‡ªåŠ¨æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚</li>
</ul>
<img src="/2023/promise0.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<p>JavaScriptå¼•æ“ä¼šå…ˆæ‰§è¡Œå®Œè°ƒç”¨æ ˆä¸­çš„ä»»åŠ¡ï¼Œç„¶åé€šè¿‡äº‹ä»¶å¾ªç¯ä»â€œæ¶ˆæ¯é˜Ÿåˆ—â€ä¸­å†å–ä¸€ä¸ªå‡ºæ¥æ‰§è¡Œï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥éšæ—¶å†å¾€æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºå¤§é‡çš„å¼‚æ­¥æ¨¡å¼çš„APIå¯¼è‡´ä»£ç ä¸€äº›å¤æ‚çš„å¼‚æ­¥é€»è¾‘ä¸æ˜“é˜…è¯»ã€‚</p>
<nav class="table-of-contents"><ul><li><a href="#_1-å›è°ƒå‡½æ•°">1. å›è°ƒå‡½æ•°</a></li><li><a href="#_2-promise">2. Promise</a><ul><li><a href="#_2-1-promise-çš„åŸºæœ¬ç”¨æ³•">2.1 Promise çš„åŸºæœ¬ç”¨æ³•</a></li><li><a href="#_2-2-promise-å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°">2.2 Promise å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°</a></li><li><a href="#_2-3-promise-çš„é“¾å¼è°ƒç”¨">2.3 Promise çš„é“¾å¼è°ƒç”¨</a></li><li><a href="#_2-4-promise-çš„å¼‚å¸¸å¤„ç†">2.4 Promise çš„å¼‚å¸¸å¤„ç†</a></li><li><a href="#_2-5-promise-çš„é™æ€æ–¹æ³•">2.5 Promise çš„é™æ€æ–¹æ³•</a></li><li><a href="#_2-6-promise-å¹¶è¡Œæ‰§è¡Œ">2.6 Promise å¹¶è¡Œæ‰§è¡Œ</a></li><li><a href="#_2-7-promise-çš„æ‰§è¡Œæ—¶åº-å®ä»»åŠ¡-å¾®ä»»åŠ¡">2.7 Promise çš„æ‰§è¡Œæ—¶åºï¼ˆå®ä»»åŠ¡&amp;å¾®ä»»åŠ¡ï¼‰</a></li></ul></li><li><a href="#_3-generatorå¼‚æ­¥æ–¹æ¡ˆ">3. Generatorå¼‚æ­¥æ–¹æ¡ˆ</a></li><li><a href="#_4-async-awaitè¯­æ³•ç³–">4. Async/Awaitè¯­æ³•ç³–</a></li></ul></nav>
<h2 id="_1-å›è°ƒå‡½æ•°" tabindex="-1">1. å›è°ƒå‡½æ•° <a class="header-anchor" href="#_1-å›è°ƒå‡½æ•°" aria-label="Permalink to &quot;1. å›è°ƒå‡½æ•°&quot;">&ZeroWidthSpace;</a></h2>
<p>å›è°ƒå‡½æ•°æ˜¯æ‰€æœ‰å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆçš„æ ¹åŸºï¼Œå›è°ƒå‡½æ•°ç”±è°ƒç”¨è€…å®šä¹‰ï¼Œäº¤ç»™æ‰§è¡Œè€…æ‰§è¡Œï¼Œå…·ä½“ç”¨æ³•å°±æ˜¯æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç½¢äº†ã€‚</p>
<p>é™¤äº†ä¼ é€’å›è°ƒå‡½æ•°å‚æ•°ä»¥å¤–ï¼Œè¿˜æœ‰å‡ ç§å¸¸è§çš„å®ç°å¼‚æ­¥çš„æ–¹å¼å¦‚äº‹ä»¶æœºåˆ¶ã€å‘å¸ƒè®¢é˜…ï¼Œå¯ä»¥ç†è§£ä¸ºå›è°ƒå‡½æ•°çš„å˜ä½“ã€‚</p>
<p>å½“ä½¿ç”¨ä¼ ç»Ÿå›è°ƒæ–¹å¼å»å®Œæˆå¤æ‚çš„å¼‚æ­¥æµç¨‹æ—¶ï¼Œä¼šæ— æ³•é¿å…å¤§é‡çš„å›è°ƒå‡½æ•°åµŒå¥—ï¼Œé€ æˆå›è°ƒåœ°ç‹±é—®é¢˜</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">setTimeout</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">1.æ‰§è¡Œä»»åŠ¡1 -&gt; ä¸‰ç§’åæ‰§è¡Œä»»åŠ¡2</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #82AAFF">setTimeout</span><span style="color: #F07178">(</span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">2.æ‰§è¡Œä»»åŠ¡2 -&gt; 2ç§’åæ‰§è¡Œä»»åŠ¡1</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">setTimeout</span><span style="color: #F07178">(</span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">3.æ‰§è¡Œä»»åŠ¡3 -&gt; 1ç§’åæ‰§è¡Œå®Œæ¯•</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">      </span><span style="color: #676E95; font-style: italic">// å›è°ƒåœ°ç‹±...</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">},</span><span style="color: #F07178"> </span><span style="color: #F78C6C">1000</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">},</span><span style="color: #F07178"> </span><span style="color: #F78C6C">2000</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">},</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">3000</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h2 id="_2-promise" tabindex="-1">2. Promise <a class="header-anchor" href="#_2-promise" aria-label="Permalink to &quot;2. Promise&quot;">&ZeroWidthSpace;</a></h2>
<p><strong>ä¸ºäº†é¿å…å›è°ƒåœ°ç‹±é—®é¢˜</strong>ï¼ŒCommonJSç¤¾åŒºæå‡ºäº†Promiseè§„èŒƒï¼Œå¹¶åœ¨ES2015ä¸­è¢«æ ‡å‡†åŒ–ã€‚Promiseå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œè¿‡åç©¶ç«Ÿæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥åªéœ€è¦æ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°å³å¯ã€‚</p>
<img src="/2023/promise1.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<h3 id="_2-1-promise-çš„åŸºæœ¬ç”¨æ³•" tabindex="-1">2.1 Promise çš„åŸºæœ¬ç”¨æ³• <a class="header-anchor" href="#_2-1-promise-çš„åŸºæœ¬ç”¨æ³•" aria-label="Permalink to &quot;2.1 Promise çš„åŸºæœ¬ç”¨æ³•&quot;">&ZeroWidthSpace;</a></h3>
<ol>
<li>æ„å»ºPromiseå®ä¾‹æ—¶ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„å‚æ•°ä¸ºä¸¤ä¸ªå¤„ç†å‡½æ•°ï¼Œåœ¨Promiseé‡Œç¼–å†™æ‰¿è¯ºçš„é€»è¾‘ï¼Œå³ä»€ä¹ˆæƒ…å†µä¸‹æˆåŠŸï¼Œä»€ä¹ˆæƒ…å†µä¸‹å¤±è´¥ï¼Œå¹¶åœ¨æˆåŠŸæˆ–å¤±è´¥æ—¶æ”¹å˜çŠ¶æ€ï¼Œæ‰§è¡Œæå‰æ³¨å†Œçš„å¤„ç†å‡½æ•°</li>
<li>ä½¿ç”¨thenæ–¹æ³•åˆ†åˆ«æ³¨å†Œpromiseå®ä¾‹çš„onFulfilledonå’ŒonRejectedå›è°ƒå‡½æ•°</li>
<li>æ³¨æ„æ³¨å†Œçš„å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰å¾…åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼ˆå¦‚ä¸‹ä¾‹ï¼‰</li>
</ol>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> a </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> b </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> promise </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">rej</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #BABED8">a</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&gt;</span><span style="color: #F07178"> </span><span style="color: #BABED8">b</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">res</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">success</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">) </span><span style="color: #676E95; font-style: italic">// æˆåŠŸæ—¶è°ƒç”¨reså‡½æ•°</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">else</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">rej</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">fail</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)    </span><span style="color: #676E95; font-style: italic">// å¤±è´¥æ—¶è°ƒç”¨rejå‡½æ•°</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">sucStr</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">sucStr</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">},</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">failStr</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">failStr</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ç¬¬ä¸€ä¸ªåŒæ­¥ä»»åŠ¡æ‰§è¡Œæ‰ä¼šæ‰§è¡Œæå‰æ³¨å†Œçš„å¼‚æ­¥å¤„ç†å‡½æ•°</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h3 id="_2-2-promise-å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°" tabindex="-1">2.2 Promise å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•° <a class="header-anchor" href="#_2-2-promise-å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°" aria-label="Permalink to &quot;2.2 Promise å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å‡½æ•°&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// ä½¿ç”¨promiseå°è£…ä¸€ä¸ªajaxè¯·æ±‚</span></span>
<span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">ajax</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">url</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #F07178">(</span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">resolve</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8; font-style: italic">reject</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #BABED8">xhr</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">XMLHttpRequest</span><span style="color: #F07178">()</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">open</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">GET</span><span style="color: #89DDFF">&#39;</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #BABED8">url</span><span style="color: #F07178">)        </span><span style="color: #676E95; font-style: italic">// æŒ‡å®šè¯·æ±‚æ–¹æ³•å’Œåœ°å€</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">responseType</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">   </span><span style="color: #676E95; font-style: italic">// æŒ‡å®šç›¸åº”ç±»å‹ä¸ºjson</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">onload</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span><span style="color: #F07178">  </span><span style="color: #676E95; font-style: italic">// è¯·æ±‚å®Œæˆåæ‰§è¡Œonloadå‡½æ•°</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">status</span><span style="color: #F07178"> </span><span style="color: #89DDFF">===</span><span style="color: #F07178"> </span><span style="color: #F78C6C">200</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">        </span><span style="color: #82AAFF">resolve</span><span style="color: #F07178">(</span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">response</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF; font-style: italic">else</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">        </span><span style="color: #82AAFF">reject</span><span style="color: #F07178">(</span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">Error</span><span style="color: #F07178">(</span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">status</span><span style="color: #F07178">))</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">xhr</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">send</span><span style="color: #F07178">()</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/user.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">res</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">},</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">err</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">err</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h3 id="_2-3-promise-çš„é“¾å¼è°ƒç”¨" tabindex="-1">2.3 Promise çš„é“¾å¼è°ƒç”¨ <a class="header-anchor" href="#_2-3-promise-çš„é“¾å¼è°ƒç”¨" aria-label="Permalink to &quot;2.3 Promise çš„é“¾å¼è°ƒç”¨&quot;">&ZeroWidthSpace;</a></h3>
<p>promiseçš„æœ¬è´¨ä¹Ÿæ˜¯ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå³é€šè¿‡thenæ–¹æ³•ä¼ é€’è¿›å»ï¼Œè€Œä¸”promiseå°†å›è°ƒåˆ†æˆäº†ä¸¤ç§å³æˆåŠŸçš„å›è°ƒå’Œå¤±è´¥çš„å›è°ƒã€‚ä½†æ˜¯å¦‚æœéœ€è¦ä¸²è”æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œè¿˜æ˜¯ä¼šå‡ºç°å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œè¿™æ—¶å€™ä½¿ç”¨promiseå°±æ²¡æœ‰ä»»ä½•æ„ä¹‰äº†ï¼Œè¿˜é¢å¤–å¢åŠ äº†å¤æ‚åº¦ã€‚</p>
<p>æ‰€ä»¥åµŒå¥—ä½¿ç”¨promiseæ˜¯ä¸å¯å–çš„ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨promiseæ–¹æ³•é“¾å¼è°ƒç”¨çš„ç‰¹ç‚¹æ¥å°½é‡ä¿è¯ä¸²è”å¼‚æ­¥ä»»åŠ¡çš„ â€œæ‰å¹³åŒ–â€ã€‚</p>
<ul>
<li>promiseçš„thenæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª<strong>å…¨æ–°çš„</strong>promiseå¯¹è±¡ï¼Œç”¨äºå®ç°promiseçš„é“¾å¼è°ƒç”¨</li>
<li>åé¢çš„thenå°±æ˜¯åœ¨ä¸ºå‰é¢thenè¿”å›çš„promiseæ³¨å†Œå›è°ƒ</li>
<li>å‰é¢thenæ–¹æ³•ä¸­è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼ä¼šä½œä¸ºåé¢thenæ–¹æ³•å›è°ƒçš„å‚æ•°</li>
<li>è‹¥å›è°ƒä¸­è¿”å›çš„æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œåˆ™åé¢thenæ–¹æ³•çš„å›è°ƒä¼šç­‰å¾…ä»–çš„ç»“æŸ</li>
</ul>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url2</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url3</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">api/url4</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">		</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>å¤šæ¬¡catchçš„é“¾å¼è°ƒç”¨ï¼ˆ<em>for test</em>ï¼‰ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> p </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">reject</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Error</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">fail1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">p</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">err</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(err))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok2</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #89DDFF">{</span><span style="color: #89DDFF; font-style: italic">throw</span><span style="color: #F07178"> </span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">Error</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">fail2</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">err</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(err))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok3</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">ok4</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span></code></pre>
</div><h3 id="_2-4-promise-çš„å¼‚å¸¸å¤„ç†" tabindex="-1">2.4 Promise çš„å¼‚å¸¸å¤„ç† <a class="header-anchor" href="#_2-4-promise-çš„å¼‚å¸¸å¤„ç†" aria-label="Permalink to &quot;2.4 Promise çš„å¼‚å¸¸å¤„ç†&quot;">&ZeroWidthSpace;</a></h3>
<p>é™¤äº†promiseçš„æ‰§è¡Œé€»è¾‘æ‰§è¡Œäº†rejectå‡½æ•°ï¼Œåœ¨promiseåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯æˆ–è€…ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ä¹Ÿä¼šæ‰§è¡Œrejectå‡½æ•°ï¼Œæ‰€ä»¥thenæ–¹æ³•ä¸­æ³¨å†Œçš„onrejectedå‡½æ•°å°±æ˜¯ä¸ºpromiseçš„å¼‚å¸¸åšå¤„ç†ï¼Œå³promiseå¤±è´¥æˆ–è€…å‡ºç°å¼‚å¸¸éƒ½ä¼šè¢«æ‰§è¡Œã€‚å…¶å®onrejectedå‡½æ•°çš„æ³¨å†Œè¿˜æœ‰ä¸€ä¸ªæ›´å¸¸è§çš„ç”¨æ³•ï¼Œå³ä½¿ç”¨promiseå®ä¾‹çš„catchæ–¹æ³•æ³¨å†Œonrejectedå›è°ƒ</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/user.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onFulfilled</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">res</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onRejcted</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// ç­‰åŒäº</span></span>
<span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/user.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onFulfilled</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">res</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">res</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">undefined,</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">onRejcted</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>ç”¨catchæ–¹æ³•æ›´å¸¸è§ï¼Œå› ä¸ºæ›´é€‚åˆé“¾å¼è°ƒç”¨ã€‚é”™è¯¯ä¼šéšç€promiseé“¾æ¡ä¼ é€’ï¼Œæ‰€ä»¥æœ€åä½¿ç”¨c<strong>atchæ–¹æ³•æ›´åƒæ˜¯ç»™æ•´ä¸ªpromiseé“¾æ¡æ³¨å†Œçš„å¤±è´¥å›è°ƒ</strong></p>
<h3 id="_2-5-promise-çš„é™æ€æ–¹æ³•" tabindex="-1">2.5 Promise çš„é™æ€æ–¹æ³• <a class="header-anchor" href="#_2-5-promise-çš„é™æ€æ–¹æ³•" aria-label="Permalink to &quot;2.5 Promise çš„é™æ€æ–¹æ³•&quot;">&ZeroWidthSpace;</a></h3>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">resolve</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">success</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)  </span><span style="color: #676E95; font-style: italic">// ç›´æ¥è¿”å›ä¸€ä¸ªæˆåŠŸçš„Promiseå¯¹è±¡</span></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">resolve</span><span style="color: #BABED8">(promise)    </span><span style="color: #676E95; font-style: italic">// å¦‚æœæ¥æ”¶åˆ°ä¸€ä¸ªpromiseå¯¹è±¡åˆ™åŸæ ·è¿”å›</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">reject</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Error</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">rejected</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)) </span><span style="color: #676E95; font-style: italic">// å¿«é€Ÿå¾—åˆ°ä¸€ä¸ªä¸€å®šæ˜¯å¤±è´¥çš„promiseå¯¹è±¡</span></span>
<span class="line"><span style="color: #BABED8">	</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(err))</span></span></code></pre>
</div><h3 id="_2-6-promise-å¹¶è¡Œæ‰§è¡Œ" tabindex="-1">2.6 Promise å¹¶è¡Œæ‰§è¡Œ <a class="header-anchor" href="#_2-6-promise-å¹¶è¡Œæ‰§è¡Œ" aria-label="Permalink to &quot;2.6 Promise å¹¶è¡Œæ‰§è¡Œ&quot;">&ZeroWidthSpace;</a></h3>
<p>å‰é¢éƒ½æ˜¯å¤šä¸ªpromiseä¸²è”æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œè€Œå½“å¤šä¸ªä»»åŠ¡å½¼æ­¤æ²¡æœ‰ä¾èµ–æ—¶å¯ä»¥å¹¶è¡Œæ‰§è¡Œæ¥æé«˜æ‰§è¡Œé€Ÿåº¦ï¼ŒPromise.allæ–¹æ³•å¯ä»¥å°†å¤šä¸ªpromiseåˆå¹¶ä¸ºä¸€ä¸ªpromiseç»Ÿä¸€ç®¡ç†ã€‚Promise.all()æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…¨æ–°çš„promiseå¯¹è±¡ï¼Œå½“å…¶å†…éƒ¨æ‰€æœ‰çš„promiseéƒ½å®Œæˆåï¼Œè¿™ä¸ªæ–°çš„promiseå¯¹è±¡æ‰ä¼šå®Œæˆï¼Œä¸”å…¶æ‹¿åˆ°çš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«æ¯ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œçš„ç»“æœã€‚å…¶ä¸­ä»»ä½•ä¸€ä¸ªpromiseå¤±è´¥ï¼Œè¿™ä¸ªæ–°çš„promiseä¹Ÿå°±å¤±è´¥äº†ã€‚</p>
<p>ç¤ºä¾‹ï¼šå…ˆæ‹¿åˆ°è¦è®¿é—®çš„urlåˆ—è¡¨ï¼Œå†å¹¶è¡Œè®¿é—®</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/urls.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">urls</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">Object</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">values</span><span style="color: #F07178">(</span><span style="color: #BABED8">value</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">tasks</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">urls</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">map</span><span style="color: #F07178">(</span><span style="color: #BABED8; font-style: italic">map</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #BABED8">url</span><span style="color: #F07178">))</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">all</span><span style="color: #F07178">(</span><span style="color: #BABED8">tasks</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">values</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">values</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><p>Promise.race()ä¹Ÿå¯ä»¥å°†å¤šä¸ªpromiseåˆå¹¶ä¸ºä¸€ä¸ªpromiseå¯¹è±¡ï¼Œä½†Promise.all()ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ç»“æŸæ‰ä¼šç»“æŸï¼Œè€ŒPromise.race()åªä¼šç­‰å¾…ç¬¬ä¸€ä¸ªå…ˆç»“æŸçš„ä»»åŠ¡ã€‚</p>
<p>ç¤ºä¾‹ï¼šä¸€ä¸ªè¯·æ±‚promise+ä¸€ä¸ªå®šæ—¶promiseç”¨äºå¤„ç†è¯·æ±‚è¶…æ—¶</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> request </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">ajax</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/urls.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> timeout </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #FFCB6B">Promise</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">resolve</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #BABED8; font-style: italic">reject</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #82AAFF">setTimeout</span><span style="color: #F07178">(</span><span style="color: #89DDFF">()</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #82AAFF">reject</span><span style="color: #F07178">(</span><span style="color: #89DDFF">new</span><span style="color: #F07178"> </span><span style="color: #82AAFF">Error</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">timeout</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">))</span><span style="color: #89DDFF">,</span><span style="color: #F07178"> </span><span style="color: #F78C6C">500</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">race</span><span style="color: #BABED8">([</span></span>
<span class="line"><span style="color: #BABED8">  request</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  timeout</span></span>
<span class="line"><span style="color: #BABED8">])</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">value</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #F07178"> </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">value</span><span style="color: #F07178">) </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">catch</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #F07178"> </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">) </span><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><h3 id="_2-7-promise-çš„æ‰§è¡Œæ—¶åº-å®ä»»åŠ¡-å¾®ä»»åŠ¡" tabindex="-1">2.7 Promise çš„æ‰§è¡Œæ—¶åºï¼ˆå®ä»»åŠ¡&amp;å¾®ä»»åŠ¡ï¼‰ <a class="header-anchor" href="#_2-7-promise-çš„æ‰§è¡Œæ—¶åº-å®ä»»åŠ¡-å¾®ä»»åŠ¡" aria-label="Permalink to &quot;2.7 Promise çš„æ‰§è¡Œæ—¶åºï¼ˆå®ä»»åŠ¡&amp;å¾®ä»»åŠ¡ï¼‰&quot;">&ZeroWidthSpace;</a></h3>
<p>å³ä½¿Promiseæ²¡æœ‰ä»»ä½•çš„å¼‚æ­¥æ“ä½œï¼Œå®ƒçš„å›è°ƒå‡½æ•°ä»ç„¶ä¸ä¼šç«‹å³æ‰§è¡Œè€Œæ˜¯è¿›å…¥å›è°ƒé˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œå³ç­‰å¾…æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œåæ‰ä¼šæ‰§è¡Œã€‚</p>
<p>ä½†åœ¨å›è°ƒé˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…çš„ä»»åŠ¡å¹¶ä¸æ˜¯å¹³ç­‰çš„ã€‚å›è°ƒé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ç§°ä¸ºå®ä»»åŠ¡ï¼Œå®ä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥ä¸´æ—¶åŠ ä¸Šä¸€äº›é¢å¤–éœ€æ±‚ï¼Œè¿™äº›ä¸´æ—¶éœ€æ±‚å¯ä»¥ä½œä¸ºæ–°çš„å®ä»»åŠ¡è¿›åˆ°é˜Ÿåˆ—æ’é˜Ÿï¼ˆå¦‚ä¸‹setTimeoutå›è°ƒï¼‰ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå½“å‰ä»»åŠ¡çš„å¾®ä»»åŠ¡ï¼Œç›´æ¥åœ¨æœ¬è½®è°ƒç”¨çš„æœ«å°¾ç«‹å³æ‰§è¡Œï¼ˆå¦‚ä¸‹Promiseå›è°ƒï¼‰ï¼Œå¾®ä»»åŠ¡çš„æ¦‚å¿µæ˜¯åæ¥æ‰æåˆ°JSä¸­çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†æé«˜æ•´ä½“å“åº”èƒ½åŠ›ã€‚ç›®å‰ç»å¤§å¤šæ•°å¼‚æ­¥è°ƒç”¨çš„APIéƒ½æ˜¯ä½œä¸ºå®ä»»åŠ¡æ‰§è¡Œï¼Œè€Œä½œä¸ºå¾®ä»»åŠ¡çš„æœ‰Promise &amp; MutationObserver &amp; Nodeä¸­çš„process.nextTick</p>
<aside>
ğŸ’¡ åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æœ‰ä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼šå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆ–æ¯æ¬¡ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œéƒ½ä¼šä¼˜å…ˆæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚
<p>åœ¨Nodeä¸­ï¼Œä»»åŠ¡é˜Ÿåˆ—çš„ä¼˜å…ˆçº§åˆ’åˆ†æ¯”æµè§ˆå™¨æ›´åŠ ç»†åŒ–ã€‚</p>
</aside>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">start</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">setTimeout</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">settimeout</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">0</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFCB6B">Promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">resolve</span><span style="color: #BABED8">()</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">promise1</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">promise2</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">promise3</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">end</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// --------------------------</span></span>
<span class="line"><span style="color: #BABED8">start</span></span>
<span class="line"><span style="color: #BABED8">end</span></span>
<span class="line"><span style="color: #BABED8">promise1</span></span>
<span class="line"><span style="color: #BABED8">promise2</span></span>
<span class="line"><span style="color: #BABED8">promise3</span></span>
<span class="line"><span style="color: #BABED8">settimeout</span></span></code></pre>
</div><h2 id="_3-generatorå¼‚æ­¥æ–¹æ¡ˆ" tabindex="-1">3. Generatorå¼‚æ­¥æ–¹æ¡ˆ <a class="header-anchor" href="#_3-generatorå¼‚æ­¥æ–¹æ¡ˆ" aria-label="Permalink to &quot;3. Generatorå¼‚æ­¥æ–¹æ¡ˆ&quot;">&ZeroWidthSpace;</a></h2>
<p>ç›¸æ¯”äºä¼ ç»Ÿå¼‚æ­¥è°ƒç”¨çš„æ–¹å¼ï¼Œç”¨Promiseå¤„ç†å¼‚æ­¥è°ƒç”¨æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨è§£å†³å›è°ƒåµŒå¥—çš„é—®é¢˜ï¼Œå¯ä»¥å®ç°å¼‚æ­¥ä»»åŠ¡çš„ä¸²è”æ‰§è¡Œï¼Œä½†è¿™æ ·ä¾ç„¶æœ‰å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ˆå°½ç®¡æ²¡åµŒå¥—ï¼‰ï¼Œä¾ç„¶æ²¡æœ‰è¾¾åˆ°ä¼ ç»ŸåŒæ­¥ä»£ç çš„å¯è¯»æ€§ã€‚</p>
<p>ES2015æä¾›äº†Generatorï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// ç”Ÿæˆå™¨å‡½æ•°çš„è¯­æ³•å°±æ˜¯æ™®é€šå‡½æ•°åŠ ä¸ª*</span></span>
<span class="line"><span style="color: #C792EA">function</span><span style="color: #89DDFF">*</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">foo</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">try</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">res</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">yield</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">foo</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">  </span><span style="color: #676E95; font-style: italic">// é‡åˆ°yieldä¼šæš‚åœç”Ÿæˆå™¨çš„æ‰§è¡Œ,å¹¶æŠŠåé¢çš„å€¼è¿”å›å‡ºå»</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">res</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">catch</span><span style="color: #F07178"> (</span><span style="color: #BABED8">e</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">e</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> generator </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">foo</span><span style="color: #BABED8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// 1.æ‰‹åŠ¨è°ƒç”¨ç”Ÿæˆå™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œç”Ÿæˆå™¨å‡½æ•°çš„å‡½æ•°ä½“æ‰ä¼šå¼€å§‹æ‰§è¡Œ</span></span>
<span class="line"><span style="color: #676E95; font-style: italic">// 2.resultå¯ä»¥æ¥æ”¶yieldè¿”å›çš„å€¼</span></span>
<span class="line"><span style="color: #676E95; font-style: italic">// 3.å¯ä»¥ä¼ é€’å‚æ•°åˆ°å‡½æ•°ä¸­yieldçš„ä½ç½®</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> result </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> generator</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #BABED8">()</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(result)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">generator</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">bar</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// throwæ–¹æ³•ä¹Ÿå¯ä»¥è®©ç”Ÿæˆå™¨ç»§ç»­æ‰§è¡Œï¼Œä¸è¿‡ä¼šå‘ç”Ÿæˆå™¨ä¸­æŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="color: #BABED8">generator</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">throw</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Error</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">Generator error</span><span style="color: #89DDFF">&#39;</span><span style="color: #BABED8">))</span></span></code></pre>
</div><p>å¯ä»¥åˆ©ç”¨yieldæš‚åœç”Ÿæˆå™¨å‡½æ•°æ‰§è¡Œçš„ç‰¹ç‚¹ï¼Œå®ç°æ›´ä¼˜çš„å¼‚æ­¥ç¼–ç¨‹ä½“éªŒï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #89DDFF">*</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">main</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">users</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">yield</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/api/users.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">users</span><span style="color: #F07178">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">posts</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">yield</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/api/posts.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">posts</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> g </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">main</span><span style="color: #BABED8">()</span></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> result </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #BABED8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// result.valueæ‹¿åˆ°è¿”å›çš„promiseå¯¹è±¡</span></span>
<span class="line"><span style="color: #BABED8">result</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">value</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #BABED8; font-style: italic">data</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">result2</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #F07178">(</span><span style="color: #BABED8">data</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #BABED8">result2</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">done</span><span style="color: #F07178">) </span><span style="color: #89DDFF; font-style: italic">return</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">result2</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">value</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #F07178">(</span><span style="color: #BABED8; font-style: italic">data</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">result3</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #F07178">(</span><span style="color: #BABED8">data</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #BABED8">result3</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">done</span><span style="color: #F07178">) </span><span style="color: #89DDFF; font-style: italic">return</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">result3</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">value</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #F07178">(</span><span style="color: #BABED8; font-style: italic">data</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #F07178">(</span><span style="color: #BABED8">data</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">	})</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #F07178">)</span></span></code></pre>
</div><p>ä½¿ç”¨é€’å½’ä¼˜åŒ–ä¸Šè¿°ä»£ç ï¼Œå®ç°æ›´é€šç”¨çš„ç”Ÿæˆå™¨å‡½æ•°çš„æ‰§è¡Œå™¨ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">*</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">main</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">try</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">users</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">yield</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/api/users.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">users</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">posts</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">yield</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/api/posts.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">posts</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">catch</span><span style="color: #F07178"> (</span><span style="color: #BABED8">e</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">e</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">handleResult</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">result</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #BABED8">result</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">done</span><span style="color: #F07178">) </span><span style="color: #89DDFF; font-style: italic">return</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #BABED8">result</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">value</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #F07178">(</span><span style="color: #BABED8; font-style: italic">data</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #82AAFF">handleResult</span><span style="color: #F07178">(</span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #F07178">(</span><span style="color: #BABED8">data</span><span style="color: #F07178">))</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">},</span><span style="color: #F07178"> </span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">throw</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> g </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">main</span><span style="color: #BABED8">()</span></span>
<span class="line"><span style="color: #82AAFF">handleResult</span><span style="color: #BABED8">(g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #BABED8">())</span></span>
<span class="line"><span style="color: #676E95; font-style: italic">/*---------------------------------------------*/</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// è¿›ä¸€æ­¥å°è£…</span></span>
<span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">co</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">generator</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">g</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #82AAFF">generator</span><span style="color: #F07178">()</span></span>
<span class="line"><span style="color: #F07178">  </span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #C792EA">function</span><span style="color: #F07178"> </span><span style="color: #82AAFF">handleResult</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">result</span><span style="color: #89DDFF">)</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">if</span><span style="color: #F07178"> (</span><span style="color: #BABED8">result</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">done</span><span style="color: #F07178">) </span><span style="color: #89DDFF; font-style: italic">return</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">result</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">value</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #F07178">(</span><span style="color: #BABED8; font-style: italic">data</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #82AAFF">handleResult</span><span style="color: #F07178">(</span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #F07178">(</span><span style="color: #BABED8">data</span><span style="color: #F07178">))</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">},</span><span style="color: #F07178"> </span><span style="color: #BABED8; font-style: italic">error</span><span style="color: #F07178"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">      </span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">throw</span><span style="color: #F07178">(</span><span style="color: #BABED8">error</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">}</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #82AAFF">handleResult</span><span style="color: #F07178">(</span><span style="color: #BABED8">g</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">next</span><span style="color: #F07178">())</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">co</span><span style="color: #BABED8">(main)</span></span></code></pre>
</div><p>ğŸ’¡ è¿™ç§coçš„å®ç°åœ¨2015å¹´å‰æµè¡Œï¼Œåæ¥å‡ºç°Async/Awaitåï¼Œå°±ä¸å¤ªç”¨äº†</p>
<h2 id="_4-async-awaitè¯­æ³•ç³–" tabindex="-1">4. Async/Awaitè¯­æ³•ç³– <a class="header-anchor" href="#_4-async-awaitè¯­æ³•ç³–" aria-label="Permalink to &quot;4. Async/Awaitè¯­æ³•ç³–&quot;">&ZeroWidthSpace;</a></h2>
<p>æœ‰äº†Generatorï¼ŒJSçš„å¼‚æ­¥ç¼–ç¨‹å°±æœ‰ç±»ä¼¼åŒæ­¥çš„ç¼–ç¨‹ä½“éªŒäº†ï¼Œä½†ç”¨Generatoræ–¹æ¡ˆè¿˜éœ€è¦è‡ªå·±ç¼–å†™ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ï¼ˆcoï¼‰ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚è€Œåœ¨ES2017ä¸­æ–°å¢äº†Asyncå‡½æ•°åŒæ ·æä¾›äº†æ‰å¹³åŒ–çš„å¼‚æ­¥ç¼–ç¨‹ä½“éªŒï¼Œä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿ã€‚</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">async</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">main</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">try</span><span style="color: #F07178"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">users</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">await</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/api/users.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">users</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #C792EA">const</span><span style="color: #F07178"> </span><span style="color: #BABED8">posts</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">await</span><span style="color: #F07178"> </span><span style="color: #82AAFF">ajax</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">/api/posts.json</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">posts</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span><span style="color: #F07178"> </span><span style="color: #89DDFF; font-style: italic">catch</span><span style="color: #F07178"> (</span><span style="color: #BABED8">e</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #BABED8">e</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #82AAFF">main</span><span style="color: #BABED8">()</span></span></code></pre>
</div><p>æ­¤å¤–ï¼Œasyncè¿˜ä¼šè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œæ›´åŠ åˆ©äºå¯¹æ•´ä½“ä»£ç è¿›è¡Œæ§åˆ¶ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">const</span><span style="color: #BABED8"> promise </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">main</span><span style="color: #BABED8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">promise</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">then</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #C792EA">=&gt;</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">	</span><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #F07178">(</span><span style="color: #89DDFF">&#39;</span><span style="color: #C3E88D">all completed</span><span style="color: #89DDFF">&#39;</span><span style="color: #F07178">)</span></span>
<span class="line"><span style="color: #89DDFF">}</span><span style="color: #BABED8">)</span></span></code></pre>
</div><div class="info custom-block"><p class="custom-block-title">INFO</p>
<p>ç›®å‰awaitå…³é”®å­—åªèƒ½åœ¨asyncå‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œåœ¨æ–°æ ‡å‡†ä¸­å¯èƒ½åœ¨å¤–éƒ¨ä½¿ç”¨</p>
</div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[JavaScript åŸºäºåŸå‹çš„é¢å‘å¯¹è±¡]]></title>
            <link>localhost/blog/blog/posts/JavaScript-prototype.html</link>
            <guid>localhost/blog/blog/posts/JavaScript-prototype.html</guid>
            <pubDate>Sat, 15 Jan 2022 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p>åŸºäºåŸå‹ï¼ˆPrototypeï¼‰çš„ç¼–ç¨‹å…¶å®ä¹Ÿæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ç§æ–¹å¼ã€‚æ²¡æœ‰ class åŒ–çš„ï¼Œç›´æ¥ä½¿ç”¨å¯¹è±¡ã€‚åˆå«åŸºäºå®ä¾‹çš„ç¼–ç¨‹ã€‚å…¶ä¸»æµçš„è¯­è¨€å°±æ˜¯ JavaScriptï¼Œä¸ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ¯”è¾ƒå¦‚ä¸‹ï¼š</p>
<ul>
<li>åœ¨åŸºäºç±»çš„ç¼–ç¨‹å½“ä¸­ï¼Œå¯¹è±¡æ€»å…±æœ‰ä¸¤ç§ç±»å‹ã€‚ç±»å®šä¹‰äº†å¯¹è±¡çš„åŸºæœ¬å¸ƒå±€å’Œå‡½æ•°ç‰¹æ€§ï¼Œè€Œæ¥å£æ˜¯â€œå¯ä»¥ä½¿ç”¨çš„â€å¯¹è±¡ï¼Œå®ƒåŸºäºç‰¹å®šç±»çš„æ ·å¼ã€‚åœ¨æ­¤æ¨¡å‹ä¸­ï¼Œç±»è¡¨ç°ä¸ºè¡Œä¸ºå’Œç»“æ„çš„é›†åˆï¼Œå¯¹æ‰€æœ‰æ¥å£æ¥è¯´è¿™äº›ç±»çš„è¡Œä¸ºå’Œç»“æ„éƒ½æ˜¯ç›¸åŒçš„ã€‚å› è€Œï¼ŒåŒºåˆ†è§„åˆ™é¦–å…ˆæ˜¯åŸºäºè¡Œä¸ºå’Œç»“æ„ï¼Œè€Œåæ‰æ˜¯çŠ¶æ€ã€‚</li>
<li>åŸå‹ç¼–ç¨‹çš„ä¸»å¼ è€…ç»å¸¸äº‰è®ºè¯´ï¼ŒåŸºäºç±»çš„è¯­è¨€æå€¡ä½¿ç”¨ä¸€ä¸ªå…³æ³¨åˆ†ç±»å’Œç±»ä¹‹é—´å…³ç³»çš„å¼€å‘æ¨¡å‹ã€‚ä¸æ­¤ç›¸å¯¹ï¼ŒåŸå‹ç¼–ç¨‹çœ‹èµ·æ¥æå€¡ç¨‹åºå‘˜å…³æ³¨ä¸€ç³»åˆ—å¯¹è±¡å®ä¾‹çš„è¡Œä¸ºï¼Œè€Œä¹‹åæ‰å…³å¿ƒå¦‚ä½•å°†è¿™äº›å¯¹è±¡åˆ’åˆ†åˆ°æœ€è¿‘çš„ä½¿ç”¨æ–¹å¼ç›¸ä¼¼çš„åŸå‹å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ†æˆç±»ã€‚</li>
</ul>
<img src="/2023/js-object0.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<p>æ­£å› å¦‚æ­¤ï¼Œå¾ˆå¤šåŸºäºåŸå‹çš„ç³»ç»Ÿæå€¡è¿è¡Œæ—¶è¿›è¡ŒåŸå‹çš„ä¿®æ”¹ï¼Œè€Œåªæœ‰æå°‘æ•°åŸºäºç±»çš„é¢å‘å¯¹è±¡ç³»ç»Ÿï¼ˆæ¯”å¦‚ç¬¬ä¸€ä¸ªåŠ¨æ€é¢å‘å¯¹è±¡çš„ç³»ç»Ÿ Smalltalkï¼‰å…è®¸ç±»åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«ä¿®æ”¹ã€‚</p>
<ul>
<li>åœ¨åŸºäºç±»çš„è¯­è¨€ä¸­ï¼Œä¸€ä¸ªæ–°çš„å®ä¾‹é€šè¿‡ç±»æ„é€ å™¨å’Œæ„é€ å™¨å¯é€‰çš„å‚æ•°æ¥æ„é€ ï¼Œç»“æœå®ä¾‹ç”±ç±»é€‰å®šçš„è¡Œä¸ºå’Œå¸ƒå±€åˆ›å»ºæ¨¡å‹ã€‚</li>
<li>åœ¨åŸºäºåŸå‹çš„ç³»ç»Ÿä¸­æ„é€ å¯¹è±¡æœ‰ä¸¤ç§æ–¹æ³•ï¼Œé€šè¿‡å¤åˆ¶å·²æœ‰çš„å¯¹è±¡æˆ–è€…é€šè¿‡æ‰©å±•ç©ºå¯¹è±¡åˆ›å»ºã€‚å¾ˆå¤šåŸºäºåŸå‹çš„ç³»ç»Ÿæå€¡è¿è¡Œæ—¶è¿›è¡ŒåŸå‹çš„ä¿®æ”¹ï¼Œè€ŒåŸºäºç±»çš„é¢å‘å¯¹è±¡ç³»ç»Ÿåªæœ‰åŠ¨æ€è¯­è¨€å…è®¸ç±»åœ¨è¿è¡Œæ—¶è¢«ä¿®æ”¹ï¼ˆPythonã€Ruby...ï¼‰</li>
</ul>
<h2 id="_1-object" tabindex="-1">1. Object <a class="header-anchor" href="#_1-object" aria-label="Permalink to &quot;1. Object&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>Objectï¼šå¯¹è±¡æ˜¯ä¸€ä¸ªå±æ€§çš„é›†åˆï¼Œä¸”æœ‰ä¸€ä¸ªå”¯ä¸€çš„åŸå‹ã€‚åŸå‹å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–ç©ºå€¼ã€‚</p>
</blockquote>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> point </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">x</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">10</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">y</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">20</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span></code></pre>
</div><img src="/2023/js-object1.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<p>å¯¹äºä¸Šé¢å®šä¹‰çš„ point å¯¹è±¡ï¼Œ<strong>proto</strong> å±æ€§æŒ‡å‘ point å¯¹è±¡çš„åŸå‹ã€‚åŸå‹å¯¹è±¡ç”¨äºé€šè¿‡åŠ¨æ€åˆ†æ´¾æœºåˆ¶å®ç°ç»§æ‰¿ã€‚ä¸‹é¢è®©æˆ‘ä»¬ç”¨åŸå‹é“¾çš„æ¦‚å¿µæ¥è¯¦ç»†äº†è§£è¿™ç§æœºåˆ¶ã€‚</p>
<h2 id="_2-prototype" tabindex="-1">2. Prototype <a class="header-anchor" href="#_2-prototype" aria-label="Permalink to &quot;2. Prototype&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>Protypeï¼šä¸€ä¸ª prototype æ˜¯ä¸€ä¸ªå§”æ‰˜å¯¹è±¡ï¼Œç”¨äºå®ç°åŸºäºåŸå‹çš„ç»§æ‰¿ã€‚</p>
</blockquote>
<p>æ¯ä¸ªå¯¹è±¡åœ¨åˆ›å»ºæ—¶éƒ½ä¼šæ¥æ”¶åˆ°å…¶åŸå‹ã€‚å¦‚æœæœªæ˜ç¡®è®¾ç½®åŸå‹ï¼Œå¯¹è±¡å°†æ¥æ”¶ Object.prototype ä½œä¸ºå…¶åŸå‹ã€‚å¯ä»¥é€šè¿‡ <strong>proto</strong> å±æ€§æˆ– <code>Object.create()</code> æ–¹æ³•æ˜¾å¼è®¾ç½®åŸå‹ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// Base object.</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> point </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">x</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">10</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">y</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">20</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// Inherit from `point` object.</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> point3D </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">z</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">30</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">__proto__</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> point</span><span style="color: #89DDFF">,</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span></span>
<span class="line"><span style="color: #BABED8">  point3D</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">x</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 10, inherited</span></span>
<span class="line"><span style="color: #BABED8">  point3D</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">y</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 20, inherited</span></span>
<span class="line"><span style="color: #BABED8">  point3D</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">z </span><span style="color: #676E95; font-style: italic">// 30, own</span></span>
<span class="line"><span style="color: #BABED8">)</span></span></code></pre>
</div><blockquote>
<p>Prototype chainï¼šåŸå‹é“¾æ˜¯ç”¨äºå®ç°ç»§æ‰¿å’Œå…±äº«å±æ€§çš„æœ‰é™å¯¹è±¡é“¾ã€‚</p>
</blockquote>
<p>ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œè€ŒåŸå‹æœ¬èº«å¯ä»¥æœ‰è‡ªå·±çš„åŸå‹ã€‚å¦‚æœä¸€ä¸ªåŸå‹è¿˜æœ‰åŸå‹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå®ƒè¢«ç§°ä¸ºåŸå‹é“¾ã€‚</p>
<img src="/2023/js-object2.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<p>è§„åˆ™å¾ˆç®€å•ï¼šå¦‚æœåœ¨å¯¹è±¡æœ¬èº«ä¸­æ‰¾ä¸åˆ°æŸä¸ªå±æ€§ï¼Œåˆ™å°è¯•åœ¨åŸå‹ä¸­æ‰¾ã€åœ¨åŸå‹çš„åŸå‹ä¸­æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°æ‰¾éæ•´ä¸ªåŸå‹é“¾ï¼Œå¦‚æœæœ€ç»ˆåœ¨åŸå‹é“¾ä¸­æ‰¾ä¸åˆ°å±æ€§ï¼Œåˆ™è¿”å› undefinedã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™ç§æœºåˆ¶ç§°ä¸ºåŠ¨æ€è°ƒåº¦æˆ–å§”æ‰˜ã€‚</p>
<blockquote>
<p>å§”æ‰˜ï¼šä¸€ç§ç”¨äºè§£æç»§æ‰¿é“¾ä¸­çš„å±æ€§çš„æœºåˆ¶ã€‚è¯¥è¿‡ç¨‹å‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œå› æ­¤ä¹Ÿç§°ä¸º<strong>åŠ¨æ€è°ƒåº¦ã€‚</strong></p>
</blockquote>
<p>ğŸ’¡ ä¸åœ¨ç¼–è¯‘æ—¶è§£æå¼•ç”¨æ—¶çš„é™æ€åˆ†æ´¾ç›¸æ¯”ï¼ŒåŠ¨æ€åˆ†æ´¾åœ¨è¿è¡Œæ—¶è§£æå¼•ç”¨ã€‚</p>
<p>å¯¹è±¡å­—é¢é‡å®é™…ä¸Šæ°¸è¿œä¸ä¼šä¸ºç©ºï¼Œå³å®ƒæ€»æ˜¯å°† Object.prototype ä½œä¸ºå…¶é»˜è®¤åŸå‹ï¼Œå¹¶ç»§æ‰¿å…¶å±æ€§ã€‚è‹¥è¦åˆ›å»ºæ— åŸå‹çš„å¯¹è±¡ï¼Œå¿…é¡»å°†å…¶åŸå‹æ˜¾å¼è®¾ç½®ä¸º nullï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// Doesn&#39;t inherit from anything.</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> dict </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> Object</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">create</span><span style="color: #BABED8">(</span><span style="color: #89DDFF">null</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(dict</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">toString) </span><span style="color: #676E95; font-style: italic">// undefined</span></span></code></pre>
</div><p>åŠ¨æ€åˆ†æ´¾æœºåˆ¶å…è®¸ç»§æ‰¿é“¾çš„çµæ´»å¯å˜æ€§ï¼Œæä¾›æ›´æ”¹å§”æ‰˜å¯¹è±¡çš„èƒ½åŠ›ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> protoA </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #BABED8"> </span><span style="color: #F07178">x</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">10</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> protoB </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #BABED8"> </span><span style="color: #F07178">x</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">20</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// Same as `let objectC = {__proto__: protoA};`:</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> objectC </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> Object</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">create</span><span style="color: #BABED8">(protoA)</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(objectC</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">x) </span><span style="color: #676E95; font-style: italic">// 10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #676E95; font-style: italic">// Change the delegate:</span></span>
<span class="line"><span style="color: #BABED8">Object</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">setPrototypeOf</span><span style="color: #BABED8">(objectC</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> protoB)</span></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(objectC</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">x) </span><span style="color: #676E95; font-style: italic">// 20</span></span></code></pre>
</div><div class="info custom-block"><p class="custom-block-title">INFO</p>
<p>å°½ç®¡ <strong>proto</strong> å±æ€§åœ¨ä»Šå¤©å·²ç»æ ‡å‡†åŒ–ï¼Œå¹¶ä¸”æ›´å®¹æ˜“è§£é‡Šï¼Œä½†åœ¨å®è·µä¸­æ›´å–œæ¬¢ä½¿ç”¨ API æ–¹æ³•è¿›è¡ŒåŸå‹æ“ä½œï¼Œå¦‚ Object.createã€Object.getPrototypeOfã€ Object.setPrototypeOfã€é€šè¿‡ Reflect æ¨¡å—æ“ä½œå¯¹è±¡ã€‚</p>
</div>
<p>å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€éƒ½æ˜¯åŸºäºç±»çš„æ¦‚å¿µå®ç°ç»§æ‰¿ã€‚ECMAScript 2015 ä¸­ä¹Ÿå®ç°äº†è¿™ç§åŸºäºç±»ï¼ˆclassï¼‰çš„æŠ½è±¡ç»§æ‰¿æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å…¶éšè—çš„å®ç°çš„ç»†èŠ‚ã€‚</p>
<h2 id="_3-class" tabindex="-1">3. Class <a class="header-anchor" href="#_3-class" aria-label="Permalink to &quot;3. Class&quot;">&ZeroWidthSpace;</a></h2>
<blockquote>
<p>Classï¼šç±»æ˜¯ä¸€ä¸ªæ­£å¼çš„æŠ½è±¡é›†ï¼Œå®ƒæŒ‡å®šå…¶å¯¹è±¡çš„åˆå§‹çŠ¶æ€å’Œè¡Œä¸ºã€‚</p>
</blockquote>
<p>å½“å‡ ä¸ªå¯¹è±¡å…±äº«ç›¸åŒçš„åˆå§‹çŠ¶æ€å’Œè¡Œä¸ºæ—¶ï¼Œå®ƒä»¬å°±å½¢æˆäº†ä¸€ä¸ªåˆ†ç±»ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦ä»åŒä¸€ä¸ªåŸå‹ç»§æ‰¿å¤šä¸ªå¯¹è±¡ï¼Œå¯ä»¥åˆ›å»ºè¿™ä¸ªåŸå‹ï¼Œå¹¶ä»æ–°åˆ›å»ºçš„å¯¹è±¡ä¸­æ˜¾å¼ç»§æ‰¿å®ƒï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #676E95; font-style: italic">// Generic prototype for all letters.</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> letter </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">getNumber</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">number</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">},</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> a </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #BABED8"> </span><span style="color: #F07178">number</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F07178">__proto__</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> letter </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> b </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #BABED8"> </span><span style="color: #F07178">number</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">2</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F07178">__proto__</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> letter </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> z </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span><span style="color: #BABED8"> </span><span style="color: #F07178">number</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> </span><span style="color: #F78C6C">26</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #F07178">__proto__</span><span style="color: #89DDFF">:</span><span style="color: #BABED8"> letter </span><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span></span>
<span class="line"><span style="color: #BABED8">  a</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">()</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 1</span></span>
<span class="line"><span style="color: #BABED8">  b</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">()</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 2</span></span>
<span class="line"><span style="color: #BABED8">  z</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">() </span><span style="color: #676E95; font-style: italic">// 26</span></span>
<span class="line"><span style="color: #BABED8">)</span></span></code></pre>
</div><img src="/2023/js-object3.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<p>ä½†æ˜¯ï¼Œè¿™æ ·å†™æ˜¾ç„¶å¾ˆéº»çƒ¦ã€‚è€Œç±»æŠ½è±¡æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½œä¸ºä¸€ä¸ªè¯­æ³•ç³–ï¼ˆå³ä¸€ä¸ªåœ¨è¯­ä¹‰ä¸ŠåšåŒæ ·çš„äº‹æƒ…ï¼Œä½†è¯­æ³•å½¢å¼æ›´å¥½çš„ç»“æ„ï¼‰ï¼Œå®ƒå…è®¸ä½¿ç”¨ä¸€ç§æ›´ä¾¿æ·çš„æ–¹å¼åˆ›å»ºè¿™æ ·çš„å¤šä¸ªå¯¹è±¡ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">class</span><span style="color: #BABED8"> </span><span style="color: #FFCB6B">Letter</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #C792EA">constructor</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">number</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">number</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">number</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">  </span><span style="color: #F07178">getNumber</span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">number</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> a </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Letter</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> b </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Letter</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">2</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> z </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Letter</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">26</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span></span>
<span class="line"><span style="color: #BABED8">  a</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">()</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 1</span></span>
<span class="line"><span style="color: #BABED8">  b</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">()</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 2</span></span>
<span class="line"><span style="color: #BABED8">  z</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">() </span><span style="color: #676E95; font-style: italic">// 26</span></span>
<span class="line"><span style="color: #BABED8">)</span></span></code></pre>
</div><p>ğŸ’¡ ECMAScript ä¸­åŸºäºç±»çš„ç»§æ‰¿æ˜¯åœ¨åŸºäºåŸå‹çš„å§”æ‰˜å®ç°çš„ã€‚â€œç±»â€åªæ˜¯ä¸€ä¸ªç†è®ºæŠ½è±¡ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Java æˆ– C++ ä¸­çš„é™æ€è°ƒåº¦æ¥å®ç°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ JavaScriptã€Pythonã€Ruby ç­‰ä¸­çš„åŠ¨æ€è°ƒåº¦ï¼ˆå§”æ‰˜ï¼‰æ¥å®ç°ã€‚</p>
<p>ä»æŠ€æœ¯ä¸Šæ¥çœ‹ï¼Œclass å…¶å®å°±æ˜¯â€œæ„é€ å‡½æ•° + åŸå‹â€çš„ç»„åˆã€‚æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œå¹¶è‡ªåŠ¨ä¸ºå…¶æ–°åˆ›å»ºçš„å®ä¾‹è®¾ç½®åŸå‹ã€‚</p>
<blockquote>
<p>Constructorï¼šæ„é€ å‡½æ•°æ˜¯ç”¨äºåˆ›å»ºå®ä¾‹å¹¶è‡ªåŠ¨è®¾ç½®å…¶åŸå‹çš„å‡½æ•°ã€‚</p>
</blockquote>
<p>å¯ä»¥æ˜¾å¼ä½¿ç”¨æ„é€ å‡½æ•°ã€‚æ­¤å¤–ï¼Œåœ¨å¼•å…¥ class è¯­æ³•ç³–ä¹‹å‰ï¼ŒJS å¼€å‘äººå‘˜è¿‡å»æ²¡æœ‰æ›´å¥½çš„é€‰æ‹©ï¼ˆä»ç„¶å¯ä»¥çœ‹åˆ°å¾ˆå¤šè¿™æ ·çš„é—ç•™ä»£ç ï¼‰ï¼š</p>
<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre v-pre class="shiki material-theme-palenight" ><code><span class="line"><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Letter</span><span style="color: #89DDFF">(</span><span style="color: #BABED8; font-style: italic">number</span><span style="color: #89DDFF">)</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">number</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #BABED8">number</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFCB6B">Letter</span><span style="color: #89DDFF">.</span><span style="color: #BABED8">prototype</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #C792EA">function</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">()</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">return</span><span style="color: #F07178"> </span><span style="color: #89DDFF">this.</span><span style="color: #BABED8">number</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> a </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Letter</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">1</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> b </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Letter</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">2</span><span style="color: #BABED8">)</span></span>
<span class="line"><span style="color: #C792EA">let</span><span style="color: #BABED8"> z </span><span style="color: #89DDFF">=</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">new</span><span style="color: #BABED8"> </span><span style="color: #82AAFF">Letter</span><span style="color: #BABED8">(</span><span style="color: #F78C6C">26</span><span style="color: #BABED8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #BABED8">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #BABED8">(</span></span>
<span class="line"><span style="color: #BABED8">  a</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">()</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 1</span></span>
<span class="line"><span style="color: #BABED8">  b</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">()</span><span style="color: #89DDFF">,</span><span style="color: #BABED8"> </span><span style="color: #676E95; font-style: italic">// 2</span></span>
<span class="line"><span style="color: #BABED8">  z</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">getNumber</span><span style="color: #BABED8">() </span><span style="color: #676E95; font-style: italic">// 26</span></span>
<span class="line"><span style="color: #BABED8">)</span></span></code></pre>
</div><p>è™½ç„¶è¿™æ ·å•çº§çš„ç»§æ‰¿ä½¿ç”¨æ„é€ å‡½æ•°éå¸¸ç®€å•ï¼Œä½†å¦‚æœçˆ¶ç±»å¾ˆå¤šä»£ç å°±å¾ˆå®¹æ˜“å˜å¾—æ‚ä¹±ã€‚class è¯­æ³•ç³–æ­£æ˜¯éšè—äº†è¿™äº›ç»†èŠ‚ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸Šé¢æ„é€ å‡½æ•°ä¾‹å­ä¸­çš„å®Œæ•´å…³ç³»å›¾ï¼š</p>
<img src="/2023/js-object4.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<p>ä¸Šå›¾æ˜¾ç¤ºæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹ã€‚ç”šè‡³æ„é€ å‡½æ•°ï¼ˆç±»ï¼‰Letter éƒ½æœ‰è‡ªå·±çš„åŸå‹ï¼Œå³ Function.prototypeã€‚æ„é€ å‡½æ•°çš„ prototype å±æ€§åªæ˜¯å¯¹å°†è¦æ„é€ å®ä¾‹çš„åŸå‹çš„å¼•ç”¨ã€‚å…¶æ¬¡æ„é€ å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼ˆå‡½æ•°å¯¹è±¡ï¼‰ï¼Œå…¶<code>__proto__</code> å±æ€§æŒ‡å‘ Object.prototype ï¼Œå†è¡¥å……ä¸€å¼ ç®€åŒ–ç»§æ‰¿å…³ç³»å›¾ï¼š</p>
<img src="/2023/js-object5.png" width="80%" style="margin: 1% 10% 1% 10%;"/>
<h2 id="å‚è€ƒæ–‡æ¡£" tabindex="-1">å‚è€ƒæ–‡æ¡£ <a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£" aria-label="Permalink to &quot;å‚è€ƒæ–‡æ¡£&quot;">&ZeroWidthSpace;</a></h2>
<ul>
<li>
<p><a href="http://dmitrysoshnikov.com/ecmascript/javascript-the-core-2nd-edition/#execution-context" target="_blank" rel="noreferrer">JavaScript. The Core: 2nd Edition</a></p>
</li>
<li>
<p><a href="https://coolshell.cn/articles/6668.html" target="_blank" rel="noreferrer">å†è°ˆ javascript é¢å‘å¯¹è±¡ç¼–ç¨‹ | é…· å£³ - CoolShell</a></p>
</li>
<li>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" target="_blank" rel="noreferrer">ç»§æ‰¿ä¸åŸå‹é“¾ - JavaScript | MDN</a></p>
</li>
</ul>
]]></content:encoded>
        </item>
    </channel>
</rss>