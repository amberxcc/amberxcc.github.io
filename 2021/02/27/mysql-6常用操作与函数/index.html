<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL-常用操作与函数 | xcc</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo/profile2.png">
    <meta name="description" content="常用查询语句、函数小结.">
    
    <link rel="preload" href="/assets/css/0.styles.3443fe78.css" as="style"><link rel="preload" href="/assets/js/app.0cea2264.js" as="script"><link rel="preload" href="/assets/js/6.b946c0f4.js" as="script"><link rel="preload" href="/assets/js/3.e8e39a4f.js" as="script"><link rel="preload" href="/assets/js/22.2bc4fd97.js" as="script"><link rel="prefetch" href="/assets/js/10.17e833a5.js"><link rel="prefetch" href="/assets/js/11.f4383e7a.js"><link rel="prefetch" href="/assets/js/12.6650d2ae.js"><link rel="prefetch" href="/assets/js/13.950cc5db.js"><link rel="prefetch" href="/assets/js/14.0a81b6ec.js"><link rel="prefetch" href="/assets/js/15.35250b88.js"><link rel="prefetch" href="/assets/js/16.141932a7.js"><link rel="prefetch" href="/assets/js/17.ea53e967.js"><link rel="prefetch" href="/assets/js/18.9336a1d7.js"><link rel="prefetch" href="/assets/js/19.5dc29560.js"><link rel="prefetch" href="/assets/js/20.740afe88.js"><link rel="prefetch" href="/assets/js/21.5899f657.js"><link rel="prefetch" href="/assets/js/23.b852b847.js"><link rel="prefetch" href="/assets/js/24.fca46614.js"><link rel="prefetch" href="/assets/js/25.7fc257fe.js"><link rel="prefetch" href="/assets/js/26.d7727736.js"><link rel="prefetch" href="/assets/js/27.24c389ab.js"><link rel="prefetch" href="/assets/js/28.df1b55ec.js"><link rel="prefetch" href="/assets/js/29.3706b438.js"><link rel="prefetch" href="/assets/js/30.02d6775e.js"><link rel="prefetch" href="/assets/js/31.6c3d79a3.js"><link rel="prefetch" href="/assets/js/32.97ed12c2.js"><link rel="prefetch" href="/assets/js/33.ae1fcb19.js"><link rel="prefetch" href="/assets/js/34.411936a8.js"><link rel="prefetch" href="/assets/js/4.e8fce9c7.js"><link rel="prefetch" href="/assets/js/5.7bf97a98.js"><link rel="prefetch" href="/assets/js/7.7d46e129.js"><link rel="prefetch" href="/assets/js/8.8d71c747.js"><link rel="prefetch" href="/assets/js/9.2f7cc487.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.1f3cd5b5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3443fe78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">xcc </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Home</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="https://rebel-writer-12b.notion.site/Engineering-Wiki-6f04c16f81ed4fbd8f6d599237c98dfe" target="_blank" rel="noopener noreferrer" class="nav-link external">Notions</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">xcc </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Home</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="https://rebel-writer-12b.notion.site/Engineering-Wiki-6f04c16f81ed4fbd8f6d599237c98dfe" target="_blank" rel="noopener noreferrer" class="nav-link external">Notions</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        MySQL-常用操作与函数
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">xucongcong</span> <!----></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2021-02-27T00:00:00.000Z">
      2021-02-27
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-532d3a9c><a href="/tag/MySQL" data-v-532d3a9c><span data-v-532d3a9c>MySQL</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h2 id="基本操作"><a href="#基本操作" class="header-anchor">#</a> 基本操作</h2> <p>这里的基本操作为添加、修改、删除数据表中的记录。</p> <h3 id="insert语句"><a href="#insert语句" class="header-anchor">#</a> INSERT语句</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 通用INSERT:</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名 <span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span> 字段<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>

<span class="token comment">-- MySQL方言版INSERT:</span>
<span class="token keyword">INSERT</span> <span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span> 表名 <span class="token keyword">SET</span> 字段<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span> 字段<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">;</span>

<span class="token comment">--使用IGNORE关键字可以忽略冲突记录（使用REPLACE IGNORE INTO则会覆盖冲突记录）</span>
<span class="token keyword">INSERT</span> <span class="token punctuation">[</span>IGONRE<span class="token punctuation">]</span> <span class="token keyword">INTO</span> 表名 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>插入时建议带上字段名，不然MySQL还需要额外查询表结构</p></li> <li><p>VALUES中的值可以使用子查询的结果</p></li></ul> <br> <h3 id="update语句"><a href="#update语句" class="header-anchor">#</a> UPDATE语句</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token punctuation">[</span><span class="token keyword">IGNORE</span><span class="token punctuation">]</span> 表名
<span class="token keyword">SET</span> 字段<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span> 字段<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>由于UPDATE语句先查询出记录再修改，<strong>ORDER BY</strong> 子句可以对查询到的数据先排序再修改，避免有些字段修改后与还未修改的记录产生冲突。</p></li> <li><p><strong>LIMIT</strong> 子句可以只筛选出首页的前几条数据，这里的LIMIT子句中只能有一个参数。</p></li></ul> <p>使用表连接修改<strong>多张表</strong>的记录：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 内连接：</span>
<span class="token keyword">UPDATE</span> 表<span class="token number">1</span> 
<span class="token keyword">JOIN</span> 表<span class="token number">2</span> <span class="token punctuation">[</span><span class="token keyword">ON</span> 条件<span class="token punctuation">]</span>
<span class="token keyword">SET</span> 字段<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span> 字段<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>

<span class="token comment"># 外连接</span>
<span class="token keyword">UPDATE</span> 表<span class="token number">1</span> <span class="token punctuation">[</span><span class="token keyword">LEFT</span><span class="token operator">/</span><span class="token keyword">RIGHT</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span>
<span class="token keyword">SET</span> 字段<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span> 字段<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><br> <h3 id="delete语句"><a href="#delete语句" class="header-anchor">#</a> DELETE语句</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token punctuation">[</span><span class="token keyword">IGNORE</span><span class="token punctuation">]</span> <span class="token keyword">FROM</span> 表名
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>使用表连接删除<strong>多张表</strong>的记录：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 内连接</span>
<span class="token keyword">DELETE</span> 表<span class="token number">1</span><span class="token punctuation">,</span> 表<span class="token number">2</span> <span class="token keyword">FROM</span> 表<span class="token number">1</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> <span class="token keyword">ON</span> 条件
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment"># 外连接</span>
<span class="token keyword">DELETE</span> 表<span class="token number">1</span><span class="token punctuation">,</span> 表<span class="token number">2</span> <span class="token keyword">FROM</span> 表<span class="token number">1</span> <span class="token punctuation">[</span><span class="token keyword">LEFT</span><span class="token operator">/</span><span class="token keyword">RIGHT</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> <span class="token keyword">ON</span> 条件<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre></div><p>快速删除全部记录：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 绕过事务机制删除，速度远超DELETE语句</span>

<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">;</span>
</code></pre></div><br> <h2 id="常用内建函数"><a href="#常用内建函数" class="header-anchor">#</a> 常用内建函数</h2> <p><strong>文本处理函数：</strong></p> <table><thead><tr><th style="text-align:center;">函 数</th> <th style="text-align:center;">说 明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>Left()</code></td> <td style="text-align:center;">返回串左边的字符</td></tr> <tr><td style="text-align:center;"><code>Length()</code></td> <td style="text-align:center;">返回串的长度</td></tr> <tr><td style="text-align:center;"><code>Locate()</code></td> <td style="text-align:center;">找出串的一个子串</td></tr> <tr><td style="text-align:center;"><code>Lower()</code></td> <td style="text-align:center;">将串转换为小写</td></tr> <tr><td style="text-align:center;"><code>LTrim()</code></td> <td style="text-align:center;">去掉串左边的空格</td></tr> <tr><td style="text-align:center;"><code>Right()</code></td> <td style="text-align:center;">返回串右边的字符</td></tr> <tr><td style="text-align:center;"><code>RTrim()</code></td> <td style="text-align:center;">去掉串右边的空格</td></tr> <tr><td style="text-align:center;"><code>Soundex()</code></td> <td style="text-align:center;">返回串的<code>SOUNDEX</code> 值</td></tr> <tr><td style="text-align:center;"><code>SubString()</code></td> <td style="text-align:center;">返回子串的字符</td></tr> <tr><td style="text-align:center;"><code>Upper()</code></td> <td style="text-align:center;">将串转换为大写</td></tr></tbody></table> <p><strong>日期处理：</strong></p> <table><thead><tr><th style="text-align:center;">函 数</th> <th style="text-align:center;">说 明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>AddDate()</code></td> <td style="text-align:center;">增加一个日期（天、周等）</td></tr> <tr><td style="text-align:center;"><code>AddTime()</code></td> <td style="text-align:center;">增加一个时间（时、分等）</td></tr> <tr><td style="text-align:center;"><code>CurDate()</code></td> <td style="text-align:center;">返回当前日期</td></tr> <tr><td style="text-align:center;"><code>CurTime()</code></td> <td style="text-align:center;">返回当前时间</td></tr> <tr><td style="text-align:center;"><code>Date()</code></td> <td style="text-align:center;">返回日期时间的日期部分</td></tr> <tr><td style="text-align:center;"><code>DateDiff()</code></td> <td style="text-align:center;">计算两个日期之差</td></tr> <tr><td style="text-align:center;"><code>Date_Add()</code></td> <td style="text-align:center;">高度灵活的日期运算函数</td></tr> <tr><td style="text-align:center;"><code>Date_Format()</code></td> <td style="text-align:center;">返回一个格式化的日期或时间串</td></tr> <tr><td style="text-align:center;"><code>Day()</code></td> <td style="text-align:center;">返回一个日期的天数部分</td></tr> <tr><td style="text-align:center;"><code>DayOfWeek()</code></td> <td style="text-align:center;">对于一个日期，返回对应的星期几</td></tr> <tr><td style="text-align:center;"><code>Hour()</code></td> <td style="text-align:center;">返回一个时间的小时部分</td></tr> <tr><td style="text-align:center;"><code>Minute()</code></td> <td style="text-align:center;">返回一个时间的分钟部分</td></tr> <tr><td style="text-align:center;"><code>Month()</code></td> <td style="text-align:center;">返回一个日期的月份部分</td></tr> <tr><td style="text-align:center;"><code>Now()</code></td> <td style="text-align:center;">返回当前日期和时间</td></tr> <tr><td style="text-align:center;"><code>Second()</code></td> <td style="text-align:center;">返回一个时间的秒部分</td></tr> <tr><td style="text-align:center;"><code>Time()</code></td> <td style="text-align:center;">返回一个日期时间的时间部分</td></tr> <tr><td style="text-align:center;"><code>Year()</code></td> <td style="text-align:center;">返回一个日期的年份部分</td></tr></tbody></table> <p><strong>数值处理：</strong></p> <table><thead><tr><th style="text-align:center;">函 数</th> <th style="text-align:center;">说 明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>Abs()</code></td> <td style="text-align:center;">返回一个数的绝对值</td></tr> <tr><td style="text-align:center;"><code>Cos()</code></td> <td style="text-align:center;">返回一个角度的余弦</td></tr> <tr><td style="text-align:center;"><code>Exp()</code></td> <td style="text-align:center;">返回一个数的指数值</td></tr> <tr><td style="text-align:center;"><code>Mod()</code></td> <td style="text-align:center;">返回除操作的余数</td></tr> <tr><td style="text-align:center;"><code>Pi()</code></td> <td style="text-align:center;">返回圆周率</td></tr> <tr><td style="text-align:center;"><code>Rand()</code></td> <td style="text-align:center;">返回一个随机数</td></tr> <tr><td style="text-align:center;"><code>Sin()</code></td> <td style="text-align:center;">返回一个角度的正弦</td></tr> <tr><td style="text-align:center;"><code>Sqrt()</code></td> <td style="text-align:center;">返回一个数的平方根</td></tr> <tr><td style="text-align:center;"><code>Tan()</code></td> <td style="text-align:center;">返回一个角度的正切</td></tr></tbody></table></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#基本操作" title="基本操作">基本操作</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#insert语句" title="INSERT语句">INSERT语句</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#update语句" title="UPDATE语句">UPDATE语句</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#delete语句" title="DELETE语句">DELETE语句</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#常用内建函数" title="常用内建函数">常用内建函数</a></div></div></div></div> <footer class="footer" data-v-8eb634d6><div class="footer-left-wrap" data-v-8eb634d6><ul class="contact" data-v-8eb634d6><li class="contact-item" data-v-8eb634d6><a href="https://github.com/awesomexu" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-8eb634d6><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-8eb634d6><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-8eb634d6></path></svg>
          
        </a></li><li class="contact-item" data-v-8eb634d6><a href="mailto:xcc_mail@qq.com" class="nav-link external" data-v-8eb634d6><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail" data-v-8eb634d6><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-8eb634d6></path><polyline points="22,6 12,13 2,6" data-v-8eb634d6></polyline></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-8eb634d6><ul class="copyright" data-v-8eb634d6><li class="copyright-item" data-v-8eb634d6><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-8eb634d6>Privacy Policy</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0cea2264.js" defer></script><script src="/assets/js/6.b946c0f4.js" defer></script><script src="/assets/js/3.e8e39a4f.js" defer></script><script src="/assets/js/22.2bc4fd97.js" defer></script>
  </body>
</html>
